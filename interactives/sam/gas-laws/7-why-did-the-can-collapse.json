{
  "title": "Pressure Equilibrium",
  "publicationStatus": "public",
  "subtitle": "Explore how heat and number of molecules affect pressure equilibrium between two gases.",
  "about": [
    "There are gases on both sides of a moveable barrier (piston), which stays in the same place",
    "(more or less) when you run the model because the gas pressure on the piston is in equilibrium.",
    "",
    "Add purple gas molecules and watch what happens to the piston. Reset the model. Now add",
    "yellow gas molecules. What happens to the piston?",
    "",
    "Try heating or cooling the gas molecules. Explain the change in equilibrium with each",
    "change. Which has a greater effect on equilibrium -- changing the number of gas molecules",
    "or changing the temperature? Why?"
  ],
  "models": [
    {
      "id": "page7$0",
      "url": "imports/legacy-mw-content/converted/sam-activities/gas-laws/original-interactives-in-pages/page7/page7$0.json",
      "viewOptions": {
        "controlButtons": "play_reset",
        "showVelocityVectors": true,
        "textBoxes": [
          {
            "text": "Piston wall",
            "x": 1.7465425109863282,
            "y": 1.43,
            "width": 0.5,
            "textAlign": "center",
            "layer": 1,
            "hostType": "RectangularObstacle",
            "hostIndex": 0
          }
        ]
      },
      "onLoad": [
        "var purpleAtomIndices = [],",
        "    yellowAtomIndices = [],",
        "    i;",
        "for (i = 0; i < getNumberOfAtoms(); i++) {",
        "  if( getAtomProperties(i).element === 1 ) {",
        "    yellowAtomIndices.push(i);",
        "  } else {",
        "    purpleAtomIndices.push(i);",
        "  }",
        "}",
        "set('purpleAtomIndices',purpleAtomIndices);",
        "set('yellowAtomIndices',yellowAtomIndices);"
      ]
    }
  ],
  "outputs": [
    {
      "name": "purpleAtoms",
      "value": "return getNumberOfAtoms(function(atom) { return atom.element === 3; });"
    },
    {
      "name": "yellowAtoms",
      "value": "return getNumberOfAtoms(function(atom) { return atom.element === 1; });"
    },
    {
      "name": "vxMean",
      "unitType": "velocity",
      "value": [
        "var vxSum = 0;",
        "var atomNum = getNumberOfAtoms();",
        "for (var i = 0; i < atomNum; i++) {",
        "  vxSum += Math.abs(getAtomProperties(i).vx);",
        "}",
        "return vxSum / atomNum;"
     ]
    },
    {
      "name": "vyMean",
      "unitType": "velocity",
      "value": [
        "var vySum = 0;",
        "var atomNum = getNumberOfAtoms();",
        "for (var i = 0; i < atomNum; i++) {",
        "  vySum += Math.abs(getAtomProperties(i).vy);",
        "}",
        "return vySum / atomNum;"
     ]
    },
    {
      "name": "temperatureInside",
      "unitType": "temperature",
      "value": [
        "return getTemperatureOfAtoms(get('purpleAtomIndices'));"
      ]
    },
    {
      "name": "temperatureOutside",
      "unitType": "temperature",
      "value": [
        "return getTemperatureOfAtoms(get('yellowAtomIndices'));"
      ]
    }
  ],
  "parameters": [
    {
      "name": "purpleAtomIndices",
      "initialValue": [],
      "onChange": ""
    },
    {
      "name": "yellowAtomIndices",
      "initialValue": [],
      "onChange": ""
    }
  ],
  "components": [
    {
      "type": "checkbox",
      "id": "show-velocity",
      "text": "Show velocity vectors",
      "property": "showVelocityVectors"
    },
    {
      "type": "numericOutput",
      "id": "purple-atoms",
      "property": "purpleAtoms"
    },
    {
      "type": "numericOutput",
      "id": "yellow-atoms",
      "property": "yellowAtoms"
    },
    {
      "type": "text",
      "id": "purple-label",
      "text": "Purple molecules",
      "width": "6em"
    },
    {
      "type": "text",
      "id": "yellow-label",
      "text": "Yellow molecules",
      "width": "6em"
    },
    {
      "type": "button",
      "id": "add-inside",
      "text": "+",
      "width": "6em",
      "action": [
        "var elemNum = 3;",
        "var maxX = getObstacleProperties(0).x - getElementProperties(elemNum).sigma;",
        "addAtom({ element: elemNum, x: maxX * Math.random()  , y: get('height') * Math.random(), vx: get('vxMean'), vy: get('vyMean')});"
      ]
    },
    {
      "type": "button",
      "id": "add-outside",
      "text": "+",
      "width": "6em",
      "action": [
        "var elemNum = 1;",
        "var minX = getObstacleProperties(0).x + getObstacleProperties(0).width + getElementProperties(elemNum).sigma;",
        "addAtom({ element: elemNum, x: (get('width') - minX) * Math.random() + minX , y: get('height') * Math.random(), vx: get('vxMean'), vy: get('vyMean')});"
      ]
    },
    {
      "type": "button",
      "id": "remove-inside",
      "text": "-",
      "width": "6em",
      "action": [
        "var firstFound = false;",
        "for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "  if (getAtomProperties(i).x < getObstacleProperties(0).x) {",
        "    if (!firstFound) { firstFound = true; }",
        "    else { removeAtom(i); break; }",
        "  }",
        "}"
      ]
    },
    {
      "type": "button",
      "id": "remove-outside",
      "text": "-",
      "width": "6em",
      "action": [
        "var firstFound = false;",
        "for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "  if (getAtomProperties(i).x > (getObstacleProperties(0).x + getObstacleProperties(0).width)) {",
        "    if (!firstFound) { firstFound = true; }",
        "    else { removeAtom(i); break; }",
        "  }",
        "}"
      ]
    },
    {
      "type": "button",
      "id": "heat-inside",
      "text": "Heat",
      "width": "6em",
      "action": [
        "if (get('temperature') < 10000) {",
        "  for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "    var atom = getAtomProperties(i);",
        "    if (atom.x < getObstacleProperties(0).x) {",
        "       setAtomProperties(i, { vx: atom.vx * 1.1, vy: atom.vy * 1.1 }, false, false, {suppressRepaint: true})",
        "    }",
        "  }",
        "  repaint();",
        "}",
        "else {",
        "    alert('Max temperature reached.');",
        "}"
      ]
    },
    {
      "type": "button",
      "id": "heat-outside",
      "text": "Heat",
      "width": "6em",
      "action": [
        "if (get('temperature') < 10000) {",
        "  for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "    var atom = getAtomProperties(i);",
        "    if (atom.x > getObstacleProperties(0).x) {",
        "       setAtomProperties(i, { vx: atom.vx * 1.1, vy: atom.vy * 1.1 }, false, false, {suppressRepaint: true})",
        "    }",
        "  }",
        "  repaint();",
        "}",
        "else {",
        "    alert('Max temperature reached.');",
        "}"
      ]
    },
    {
      "type": "button",
      "id": "cool-inside",
      "text": "Cool",
      "width": "6em",
      "action": [
        "for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "  var atom = getAtomProperties(i);",
        "  if (atom.x < getObstacleProperties(0).x) {",
        "     setAtomProperties(i, { vx: atom.vx * 0.9, vy: atom.vy * 0.9 }, false, false, {suppressRepaint: true})",
        "   }",
        "}",
        "repaint();"
      ]
    },
    {
      "type": "button",
      "id": "cool-outside",
      "text": "Cool",
      "width": "6em",
      "action": [
        "for (var i = 0; i < getNumberOfAtoms(); i++) {",
        "  var atom = getAtomProperties(i);",
        "  if (atom.x > getObstacleProperties(0).x) {",
        "     setAtomProperties(i, { vx: atom.vx * 0.9, vy: atom.vy * 0.9}, false, false, {suppressRepaint: true})",
        "   }",
        "}",
        "repaint();"
      ]
    },
    {
      "type": "barGraph",
      "id": "temperature-inside",
      "property": "temperatureInside",
      "title": "K",
      "labels": 0,
      "min": 0,
      "max": 2500,
      "height": "10em",
      "titleOn": "top"
    },
    {
      "type": "barGraph",
      "id": "temperature-outside",
      "property": "temperatureOutside",
      "title": "K",
      "labels": 0,
      "min": 0,
      "max": 2500,
      "height": "10em",
      "titleOn": "top"
    }
  ],
  "layout": {
    "left": [
      ["purple-label"],
      ["purple-atoms"],
      ["temperature-inside"]
    ],
    "right": [
      ["yellow-label"],
      ["yellow-atoms"],
      ["temperature-outside"]
    ],
    "bottom-inside": [
      ["add-inside", "remove-inside"],
      ["heat-inside", "cool-inside"]
    ],
    "bottom-outside": [
      ["add-outside", "remove-outside"],
      ["heat-outside", "cool-outside"]
    ],
    "footer": [ "show-velocity" ]
  },
  "template": [
    {
      "id": "left",
      "top": "3em",
      "right": "model.left",
      "align": "center",
      "fontScale": 0.8
    },
    {
      "id": "right",
      "top": "3em",
      "left": "model.right",
      "align": "center",
      "fontScale": 0.8
    },
    {
      "id": "bottom-inside",
      "top": "model.bottom",
      "left": "model.left",
      "width": "model.width/2",
      "align": "left",
      "fontScale": 0.8
    },
    {
      "id": "bottom-outside",
      "top": "model.bottom",
      "right": "model.right",
      "width": "model.width/2",
      "align": "right",
      "fontScale": 0.8
    },
    {
      "id": "footer",
      "left": "model.left",
      "top": "bottom-outside.bottom",
      "width": "model.width",
      "align": "center",
      "padding-top": "0.5em"
    }
  ]
}
