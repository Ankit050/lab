(function(){function B(a){}function C(a){z.style("opacity",1).style("left",d3.event.pageX+6+"px").style("top",d3.event.pageY-30+"px").transition().duration(250),A.text("speed: "+d3.format("6.3f")(a.speed)+"\n"+"vx:    "+d3.format("6.3f")(a.vx)+"\n"+"vy:    "+d3.format("6.3f")(a.vy)+"\n")}function D(a){}function E(){z.style("opacity",1e-6)}function Y(){G=F.clientWidth,H=F.clientHeight,I={top:lj_graph.title?36:20,right:30,bottom:lj_graph.xlabel?46:20,left:lj_graph.ylabel?60:45},J={width:G-I.left-I.right,height:H-I.top-I.bottom},K=J.width,L=J.height,M=function(a){return"translate("+P(a)+",0)"},N=function(a){return"translate(0,"+R(a)+")"},O=function(a){return a?"#ccc":"#666"},P=d3.scale.linear().domain([lj_graph.xmin,lj_graph.xmax]).range([0,K]),Q=Math.NaN,R=d3.scale.linear().domain([lj_graph.ymax,lj_graph.ymin]).nice().range([0,L]).nice(),lj_line=d3.svg.line().x(function(a,b){return P(lennard_jones_potential[b][0])}).y(function(a,b){return R(lennard_jones_potential[b][1])}),S=Math.NaN,T=null,lj_selected=lj_graph.variables[0],U,coefficient_selected=lj_graph.variables[0],undefined!==V?(d3.select(F).select("svg").attr("width",G).attr("height",H),V.select("svg").attr("width",G).attr("height",H),V.select("rect.plot").attr("width",J.width).attr("height",J.height).style("fill","#EEEEEE"),V.select("svg.container").attr("top",0).attr("left",0).attr("width",J.width).attr("height",J.height).attr("viewBox","0 0 "+J.width+" "+J.height),V.select("svg.linebox").attr("top",0).attr("left",0).attr("width",J.width).attr("height",J.height).attr("viewBox","0 0 "+J.width+" "+J.height),lj_graph.title&&V.select("text.title").attr("x",J.width/2).attr("dy","-1em"),lj_graph.xlabel&&V.select("text.xlabel").attr("x",J.width/2).attr("y",J.height),lj_graph.ylabel&&V.select("text.ylabel").attr("transform","translate(-40 "+J.height/2+") rotate(-90)"),V.selectAll("g.x").remove(),V.selectAll("g.y").remove()):(V=d3.select(F).append("svg:svg").attr("width",G).attr("height",H).append("svg:g").attr("transform","translate("+I.left+","+I.top+")"),W=V.append("svg:rect").attr("class","plot").attr("width",J.width).attr("height",J.height).style("fill","#EEEEEE").attr("pointer-events","all").call(d3.behavior.zoom().on("zoom",layout.lj_redraw)).on("mousedown",function(){d3.event.altKey&&(lj_points.push(lj_selected=T=d3.svg.mouse(V.node())),Z(),d3.event.preventDefault(),d3.event.stopPropagation())}),V.append("svg:svg").attr("class","linebox").attr("top",0).attr("left",0).attr("width",J.width).attr("height",J.height).attr("viewBox","0 0 "+J.width+" "+J.height).append("svg:path").attr("class","line").attr("d",lj_line(lennard_jones_potential)),lj_graph.title&&V.append("svg:text").attr("class","title").text(lj_graph.title).attr("x",J.width/2).attr("dy","-1em").style("text-anchor","middle"),lj_graph.xlabel&&V.append("svg:text").attr("class","xlabel").text(lj_graph.xlabel).attr("x",J.width/2).attr("y",J.height).attr("dy","2.4em").style("text-anchor","middle"),lj_graph.ylabel&&V.append("svg:g").append("svg:text").attr("class","ylabel").text(lj_graph.ylabel).style("text-anchor","middle").attr("transform","translate(-40 "+J.height/2+") rotate(-90)"),V.on("mousemove",$).on("mouseup",_)),layout.lj_redraw()}function Z(){var a=V.selectAll("circle").data(lj_graph.variables,function(a){return a}),b=V.select("path").attr("d",lj_line(lennard_jones_potential)),c=P.domain()[1]-P.domain()[0];a.enter().append("svg:circle").attr("class",function(a){return a===U?"selected":null}).attr("cx",function(a){return P(a.x)}).attr("cy",function(a){return R(a.y)}).attr("r",8).on("mousedown",function(a){a.coefficient=="epsilon"?a.x=lj_graph.coefficients.rmin:a.y=0,coefficient_selected=U=a,Z()}),a.attr("class",function(a){return a===coefficient_selected?"selected":null}).attr("cx",function(a){return P(a.x)}).attr("cy",function(a){return R(a.y)}),a.exit().remove(),d3.event&&d3.event.keyCode&&(d3.event.preventDefault(),d3.event.stopPropagation())}function $(){if(!U)return;F.onselectstart=function(){return!1};var a=d3.svg.mouse(V.node()),b,c;U.coefficient=="epsilon"?(b=lj_graph.coefficients.rmin,c=R.invert(Math.max(0,Math.min(J.height,a[1]))),c>lj_epsilon_max&&(c=lj_epsilon_max),c<lj_epsilon_min&&(c=lj_epsilon_min),update_epsilon(c)):(c=0,b=P.invert(Math.max(0,Math.min(J.width,a[0]))),b<lj_sigma_min&&(b=lj_sigma_min),b>lj_sigma_max&&(b=lj_sigma_max),update_sigma(b)),layout.update_molecule_radius(),model.tick(),U.x=b,U.y=c,Z()}function _(){isNaN(Q)||(F.onselectstart=function(){return!0},layout.lj_redraw(),Q=Math.NaN,d3.event.preventDefault(),d3.event.stopPropagation()),isNaN(S)||(layout.lj_redraw(),S=Math.NaN,d3.event.preventDefault(),d3.event.stopPropagation()),U=null}function bv(){bt=[],model.get_speed(bt),speed_graph.xmax=d3.max(bt),speed_graph.xmin=d3.min(bt),speed_graph.quantile=d3.quantile(bt,.1),bo=speed_graph.ymax,bj=d3.scale.linear().domain([speed_graph.xmin,speed_graph.xmax]).range([0,be]),bk=d3.scale.linear().domain([speed_graph.ymax,speed_graph.ymin]).nice().range([0,bf])}function bw(){speed_bins=d3.layout.histogram().frequency(!1).bins(bj.ticks(60))(bt),bl=(bd.width-speed_bins.length)/speed_bins.length,bn=(speed_graph.xmax-speed_graph.xmin)/speed_bins.length,speed_max=d3.max(speed_bins,function(a){return a.y})}function bx(){ba=speed_distribution_chart.clientWidth,bb=speed_distribution_chart.clientHeight,bc={top:speed_graph.title?36:20,right:30,bottom:speed_graph.xlabel?46:20,left:speed_graph.ylabel?60:45},bd={width:ba-bc.left-bc.right,height:bb-bc.top-bc.bottom},be=bd.width,bf=bd.height,bg=function(a){return"translate("+bj(a)+",0)"},bh=function(a){return"translate(0,"+bk(a)+")"},bi=function(a){return a?"#ccc":"#666"},bv(),bw(),undefined!==bp?(d3.select(speed_distribution_chart).select("svg").attr("width",ba).attr("height",bb),bp.select("rect.plot").attr("width",bd.width).attr("height",bd.height),speed_graph.title&&bp.select("text.title").attr("x",bd.width/2).attr("dy","-1em"),speed_graph.xlabel&&bp.select("text.xlabel").attr("x",bd.width/2).attr("y",bd.height),speed_graph.ylabel&&bp.select("text.ylabel").attr("transform","translate(-40 "+bd.height/2+") rotate(-90)"),bp.selectAll("g.x").remove(),bp.selectAll("g.y").remove()):(bp=d3.select(speed_distribution_chart).append("svg:svg").attr("width",ba).attr("height",bb).append("svg:g").attr("transform","translate("+bc.left+","+bc.top+")"),bq=bp.append("svg:rect").attr("class","plot").attr("width",bd.width).attr("height",bd.height).style("fill","#EEEEEE"),speed_graph.title&&bp.append("svg:text").attr("class","title").text(speed_graph.title).attr("x",bd.width/2).attr("dy","-1em").style("text-anchor","middle"),speed_graph.xlabel&&bp.append("svg:text").attr("class","xlabel").text(speed_graph.xlabel).attr("x",bd.width/2).attr("y",bd.height).attr("dy","2.4em").style("text-anchor","middle"),speed_graph.ylabel&&bp.append("svg:g").append("svg:text").attr("class","ylabel").text(speed_graph.ylabel).style("text-anchor","middle").attr("transform","translate(-40 "+bd.height/2+") rotate(-90)")),layout.speed_redraw()}function bF(){temperature=+bD.value,bD.type==="range"&&(bE.innerText=d3.format("4.1f")(temperature)),model.temperature(temperature)}function bG(){layout.temperature_control_checkbox.checked?model.set_temperature_control(!0):model.set_temperature_control(!1)}function bH(){layout.lennard_jones_forces_checkbox.checked?model.set_lennard_jones_forces(!0):model.set_lennard_jones_forces(!1)}function bI(){layout.coulomb_forces_checkbox.checked?model.set_coulomb_forces(!0):model.set_coulomb_forces(!1),layout.setup_particles()}layout={version:"0.0.1"},layout.setupScreen=function(){var a=document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen;a?layout.setupFullScreen():layout.setupRegularScreen(),layout.setupTemperature(),bz.style.display="none"},layout.setupFullScreen=function(){layout.setupFullScreenMoleculeContainer(),layout.setupFullScreenPotentialChart(),layout.setupFullScreenSpeedDistributionChart(),layout.setupFullScreenKEChart()},layout.setupRegularScreen=function(){layout.setupRegularScreenMoleculeContainer(),layout.setupRegularScreenPotentialChart(),layout.setupRegularSpeedDistributionChart(),layout.setupRegularScreenKEChart()},layout.setupRegularScreenMoleculeContainer=function(){a.style.width=document.body.clientWidth*.45+"px",a.style.height=document.body.clientWidth*.45+2+"px",layout.finishSetupMoleculeContainer()},layout.setupRegularScreenPotentialChart=function(){F.style.width=document.body.clientWidth*.25+"px",F.style.height=document.body.clientWidth*.2+"px",Y()},layout.setupRegularSpeedDistributionChart=function(){speed_distribution_chart.style.width=document.body.clientWidth*.25+"px",speed_distribution_chart.style.height=document.body.clientWidth*.2+"px",bx()},layout.setupRegularScreenKEChart=function(){kechart.style.width=document.body.clientWidth*.5+5+"px",kechart.style.height=document.body.clientWidth*.25-3+"px",finishSetupKEChart()},layout.setupFullScreenMoleculeContainer=function(){a.style.width=screen.width*.48+"px",a.style.height=screen.height*.8+3+"px",finishSetupMoleculeContainer()},layout.setupFullScreenPotentialChart=function(){F.style.width=screen.width*.22+"px",F.style.height=screen.height*.35+"px",Y()},layout.setupFullScreenSpeedDistributionChart=function(){speed_distribution_chart.style.width=screen.width*.22+"px",speed_distribution_chart.style.height=screen.height*.35+"px",bx()},layout.setupFullScreenKEChart=function(){kechart.style.width=screen.width*.44+5+"px",kechart.style.height=screen.height*.45-2+"px",finishSetupKEChart()};var a=document.getElementById("molecule-container"),b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;layout.finishSetupMoleculeContainer=function(){b=a.clientWidth,c=a.clientHeight,d={top:mc_graph.title?36:20,right:30,bottom:mc_graph.xlabel?46:20,left:mc_graph.ylabel?60:45},e={width:b-d.left-d.right,height:c-d.top-d.bottom},f=e.width,g=e.height,h=function(a){return"translate("+k(a)+",0)"},i=function(a){return"translate(0,"+n(a)+")"},j=function(a){return a?"#ccc":"#666"},k=d3.scale.linear().domain([mc_graph.xmin,mc_graph.xmax]).range([0,f]),l=k.copy(),m=Math.NaN,n=d3.scale.linear().domain([mc_graph.ymax,mc_graph.ymin]).nice().range([0,g]).nice(),o=n.copy(),p=Math.NaN,q=null,undefined!==r?(d3.select(a).select("svg").attr("width",b).attr("height",c),r.select("svg").attr("width",b).attr("height",c),r.select("rect.mc_plot").attr("width",e.width).attr("height",e.height).style("fill","#EEEEEE"),r.select("svg.mc_container").attr("top",0).attr("left",0).attr("width",e.width).attr("height",e.height).attr("viewBox","0 0 "+e.width+" "+e.height),mc_graph.title&&r.select("text.title").attr("x",e.width/2).attr("dy","-1em"),mc_graph.xlabel&&r.select("text.xlabel").attr("x",e.width/2).attr("y",e.height),mc_graph.ylabel&&r.select("text.ylabel").attr("transform","translate(-40 "+e.height/2+") rotate(-90)"),r.selectAll("g.x").remove(),r.selectAll("g.y").remove(),layout.update_molecule_radius(),t.attr("cx",function(a){return k(a.x)}).attr("cy",function(a){return n(a.y)}).attr("r",function(a){return k(a.radius)}),u.attr("transform",function(a){return"translate("+k(a.x)+","+n(a.y)+")"})):(r=d3.select(a).append("svg:svg").attr("width",b).attr("height",c).append("svg:g").attr("transform","translate("+d.left+","+d.top+")"),s=r.append("svg:rect").attr("class","mc_plot").attr("width",e.width).attr("height",e.height).style("fill","#EEEEEE"),layout.mc_container=r.append("svg:svg").attr("class","mc_container").attr("top",0).attr("left",0).attr("width",e.width).attr("height",e.height).attr("viewBox","0 0 "+e.width+" "+e.height),mc_graph.title&&r.append("svg:text").attr("class","title").text(mc_graph.title).attr("x",e.width/2).attr("dy","-1em").style("text-anchor","middle"),mc_graph.xlabel&&r.append("svg:text").attr("class","xlabel").text(mc_graph.xlabel).attr("x",e.width/2).attr("y",e.height).attr("dy","2.4em").style("text-anchor","middle"),mc_graph.ylabel&&r.append("svg:g").append("svg:text").attr("class","ylabel").text(mc_graph.ylabel).style("text-anchor","middle").attr("transform","translate(-40 "+e.height/2+") rotate(-90)")),layout.mc_redraw()},layout.mc_redraw=function(){d3.event&&d3.event.transform&&isNaN(m)&&isNaN(p)&&d3.event.transform(x,y);var a=k.tickFormat(10),b=n.tickFormat(10),c=r.selectAll("g.x").data(k.ticks(10),String).attr("transform",h);c.select("text").text(a);var d=c.enter().insert("svg:g","a").attr("class","x").attr("transform",h);d.append("svg:line").attr("stroke",j).attr("y1",0).attr("y2",e.height),d.append("svg:text").attr("y",e.height).attr("dy","1em").attr("text-anchor","middle").text(a),c.exit().remove();var f=r.selectAll("g.y").data(n.ticks(10),String).attr("transform",i);f.select("text").text(b);var g=f.enter().insert("svg:g","a").attr("class","y").attr("transform",i).attr("background-fill","#FFEEB6");g.append("svg:line").attr("stroke",j).attr("x1",0).attr("x2",e.width),g.append("svg:text").attr("x",-3).attr("dy",".35em").attr("text-anchor","end").text(b),f.exit().remove()},layout.update_molecule_radius=function(){var a=lj_graph.coefficients.rmin*mol_rmin_radius_factor;model.set_radius(a),layout.mc_container.selectAll("circle").data(molecules).attr("r",function(a){return k(a.radius)}),layout.mc_container.selectAll("text").attr("font-size",k(a*1.3))};var t,u,v,w,z=d3.select("#viz").append("div").attr("class","tooltip").style("opacity",1e-6),A=z.append("pre");layout.setup_particles=function(){var a=lj_graph.coefficients.rmin*mol_rmin_radius_factor;model.set_radius(a),layout.mc_container.selectAll("circle").remove(),layout.mc_container.selectAll("g").remove();var b=k(lj_graph.coefficients.rmin*mol_rmin_radius_factor*1.3);mol_number>100&&(b*=.9),u=layout.mc_container.selectAll("g.label").data(molecules),v=u.enter().append("svg:g").attr("class","label").attr("transform",function(a){return"translate("+k(a.x)+","+n(a.y)+")"}),v.append("svg:text").attr("class","index").attr("font-size",b).attr("x",0).attr("y","0.31em").text(function(a){return a.index}),t=layout.mc_container.selectAll("circle").data(molecules),t.enter().append("svg:circle").attr("r",function(a){return k(a.radius)}).attr("cx",function(a){return k(a.x)}).attr("cy",function(a){return n(a.y)}).style("fill",function(a,b){return layout.coulomb_forces_checkbox.checked?k(a.charge)>0?"#2ca02c":"#a02c2c":"#2ca02c"}).on("mousedown",C).on("mouseout",E)},layout.update_molecule_positions=function(){u=layout.mc_container.selectAll("g.label").data(molecules),u.attr("transform",function(a){return"translate("+k(a.x)+","+n(a.y)+")"}),t=layout.mc_container.selectAll("circle").data(molecules),t.attr("cx",function(a){return k(a.x)}).attr("cy",function(a){return n(a.y)}).attr("r",function(a){return k(a.radius)})};var F=document.getElementById("lj-potential-chart"),G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X;layout.lj_redraw=function(){d3.event&&d3.event.transform&&isNaN(Q)&&isNaN(S)&&d3.event.transform(P,R);var a=P.tickFormat(10),b=R.tickFormat(10),c=V.selectAll("g.x").data(P.ticks(10),String).attr("transform",M);c.select("text").text(a);var d=c.enter().insert("svg:g","a").attr("class","x").attr("transform",M);d.append("svg:line").attr("stroke",O).attr("y1",0).attr("y2",J.height),d.append("svg:text").attr("y",J.height).attr("dy","1em").attr("text-anchor","middle").text(a).on("mouseover",function(a){d3.select(this).style("font-weight","bold")}).on("mouseout",function(a){d3.select(this).style("font-weight","normal")}).on("mousedown",function(a){var b=d3.svg.mouse(V[0][0]);Q=P.invert(b[0])}),c.exit().remove();var e=V.selectAll("g.y").data(R.ticks(10),String).attr("transform",N);e.select("text").text(b);var f=e.enter().insert("svg:g","a").attr("class","y").attr("transform",N).attr("background-fill","#FFEEB6");f.append("svg:line").attr("stroke",O).attr("x1",0).attr("x2",J.width),f.append("svg:text").attr("x",-3).attr("dy",".35em").attr("text-anchor","end").text(b).on("mouseover",function(a){d3.select(this).style("font-weight","bold")}).on("mouseout",function(a){d3.select(this).style("font-weight","normal")}).on("mousedown",function(a){var b=d3.svg.mouse(V[0][0]);S=R.invert(b[1])}),e.exit().remove(),Z()},d3.select(F).on("mousemove",function(a){var b=d3.svg.mouse(V[0][0]);if(!isNaN(Q)){var c=P.invert(b[0]),d=P.domain()[0],e=P.domain()[1],f=e-d;if(c!==0){var g,h,i;h=f/Q,g=1+(Q/c-1)*(f/(Q-d))/h,i=[d,d+f*g],P.domain(i),layout.lj_redraw()}d3.event.preventDefault(),d3.event.stopPropagation()}if(!isNaN(S)){var j=R.invert(b[1]),k=R.domain()[1],l=R.domain()[0],m=l-k;if(j!==0){var n,o,p;o=m/S,n=1-(j/S-1)*(m/(S-k))/o,p=[k+m*n,k],R.domain(p),layout.lj_redraw()}d3.event.preventDefault(),d3.event.stopPropagation()}}).on("mouseup",function(a){isNaN(Q)||(layout.lj_redraw(),Q=Math.NaN,d3.event.preventDefault(),d3.event.stopPropagation()),isNaN(S)||(layout.lj_redraw(),S=Math.NaN,d3.event.preventDefault(),d3.event.stopPropagation())}),speed_distribution_chart=document.getElementById("speed-distribution-chart");var ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;layout.speed_redraw=function(){d3.event&&d3.event.transform&&isNaN(speed_downx)&&isNaN(speed_downy)&&d3.event.transform(bj,bk);var a=bj.tickFormat(5),b=bk.tickFormat(5),c=bp.selectAll("g.y").data(bk.ticks(5),String).attr("transform",bh);c.select("text").text(b);var d=c.enter().insert("svg:g","a").attr("class","y").attr("transform",bh).attr("background-fill","#FFEEB6");d.append("svg:line").attr("stroke",bi).attr("x1",0).attr("x2",bd.width),d.append("svg:text").attr("x",-3).attr("dy",".35em").attr("text-anchor","end").text(b).on("mouseover",function(a){d3.select(this).style("font-weight","bold")}).on("mouseout",function(a){d3.select(this).style("font-weight","normal")}).on("mousedown",function(a){var b=d3.svg.mouse(bp[0][0]);speed_downy=bk.invert(b[1]),speed_downscaley=bk.copy()}),c.exit().remove(),layout.speed_update()},layout.speed_update=function(){bv(),speed_kde=science.stats.kde().sample(bt),bj.domain([speed_graph.xmin,speed_graph.xmax]),speed_bins=d3.layout.histogram().frequency(!0).bins(bj.ticks(60))(bt),bl=(bd.width-speed_bins.length)/speed_bins.length,bn=(speed_graph.xmax-speed_graph.xmin)/speed_bins.length,speed_max=d3.max(speed_bins,function(a){return a.y}),bp.selectAll("g.bar").remove(),br=bp.selectAll("g.bar").data(speed_bins),br.enter().append("svg:g").attr("class","bar").attr("transform",function(a,b){return"translate("+bj(a.x)+","+(bf-bk(bo-a.y))+")"}).append("svg:rect").attr("class","bar").attr("fill","steelblue").attr("width",bl).attr("height",function(a){return bk(bo-a.y)})};var by=document.getElementById("start-benchmarks"),bz=document.getElementById("benchmarks-table"),bA=[{name:"molecules",run:function(){return mol_number}},{name:"temperature",run:function(){return temperature}},{name:"100 Steps (steps/s)",run:function(){modelStop();var a=+Date.now(),b=-1;while(b++<100)model.tick();return elapsed=Date.now()-a,d3.format("5.1f")(100/elapsed*1e3)}},{name:"100 Steps w/graphics",run:function(){modelStop();var a=+Date.now(),b=-1;while(b++<100)model.tick(),model_listener();return elapsed=Date.now()-a,d3.format("5.1f")(100/elapsed*1e3)}}];by.onclick=function(){benchmark.run(bz,bA)},layout.datatable_visible=!1;var bB=document.getElementById("toggle-datatable"),bC=document.getElementById("datatable-table");layout.render_datatable=function(a){function i(){return bC.getElementsByTagName("tr").length==0}function j(a){a=a||"data";var b=bC.appendChild(document.createElement("tr"));return b.className=a,b}function k(a,b,c,d){c=c||"td",d=d||1;var e=a.appendChild(document.createElement(c));e.textContent=b,d>1&&(e.colSpan=d)}function l(a,b,c){c=c||"td";var d;d=-1;while(++d<b.length)k(a,b[d])}function m(a,b,c){c=c||"td";var d=a.getElementsByTagName(c),f=-1;while(++f<d.length)d[f].textContent=h[f](b[e[f]]);f--;while(++f<e.length)k(a,h[f](b[e[f]]))}function n(a,b){i()&&k(j("title"),a,"th"),k(results_row,b)}function o(a,b,c){c=c||1;var d;d=-1;while(++d<b.length)k(a,b[d],"th",c)}function p(a){var b=-1,c=d.length;while(++b<a)b>=d.length&&j();while(--c>=b)bC.removeChild(d[b]);return bC.getElementsByClassName("data")}function q(a,b){var c=-1;while(++c<b.length)k(a,b[c])}function r(a,b,c,d){var e;e=-1;while(++e<d.length)q(b[e],d[e])}bC=document.getElementById("datatable-table"),bC.style.display="none";var b,c=bC.getElementsByClassName("title"),d=bC.getElementsByClassName("data"),e=["index","px","py","x","y","vx","vy","ax","ay","speed","radius","mass","charge"],f=d3.format(" 2d"),g=d3.format(" 3.4f"),h=[f,g,g,g,g,g,g,g,g,g,g,g,f];a=a||!1;if(c.length==0){var s=j("title");o(s,e),d=p(molecules.length)}a&&(d=p(molecules.length)),b=-1;while(++b<molecules.length)m(d[b],molecules[b])},bB.onclick=function(){layout.datatable_visible?(layout.datatable_visible=!1,bB.textContent="Show Data Table",bC.style.display="none"):(layout.datatable_visible=!0,bB.textContent="Hide Data Table",layout.render_datatable(),bC.style.display="")};var bD=document.getElementById("select-temperature"),bE=document.createElement("span");layout.setupTemperature=function(){if(Modernizr.inputtypes.range){var a=document.createElement("input");a.type="range",a.min="0",a.max="10",a.step="0.5",a.value=+bD.value,bD.parentNode.replaceChild(a,bD),a.id="select-temperature",bD=a,bE.id="select-temperature-display",bE.innerText=temperature,bD.parentNode.appendChild(bE),bD=document.getElementById("select-temperature")}bD.onchange=bF},bD.type==="range"&&(bD.value=temperature,bE.innerText=d3.format("4.1f")(temperature)),layout.temperature_control_checkbox=document.getElementById("temperature-control-checkbox"),layout.temperature_control_checkbox.onchange=bG,layout.lennard_jones_forces_checkbox=document.getElementById("lennard-jones-forces-checkbox"),layout.lennard_jones_forces_checkbox.onchange=bH,layout.coulomb_forces_checkbox=document.getElementById("coulomb-forces-checkbox"),layout.coulomb_forces_checkbox.onchange=bI;var bJ=document.getElementById("stats");layout.displayStats=function(){var a=model.ke(),b=model.pe(),c=a+b;bJ.textContent="Time: "+d3.format("5.2f")(model.stepCounter()*sample_time)+" (ns), "+"KE: "+d3.format("1.4f")(a)+", "+"TE: "+d3.format("1.4f")(c)+", "+"Pressure: "+d3.format("6.3f")(model.pressure())+", "+"Rate: "+d3.format("5.1f")(model.get_rate())+" (steps/s)"};if(document.querySelectorAll){var bK=document.querySelector("#fullscreen");bK&&(bK.style.cursor="pointer",bK.addEventListener("click",function(){var a=document.documentElement,b=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen,c=document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen,d=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen;b?c?d.call(document):b.call(a):alert("You'll need to use a newer browser to use the\nfull-screen API.\n\nChrome v15 (beta)\nhttp://www.google.com/landing/chrome/beta/\n\nChrome v17 Canary:\nhttp://tools.google.com/dlpage/chromesxs\n\nSafari v5.1.1:\n\nFireFox v9 Aurora:\nhttps://www.mozilla.org/en-US/firefox/channel/\n\nFireFox v10 Nightly\nhttp://nightly.mozilla.org/\nOpen 'about:config' and set: full-screen-api-enabled")},!1))}})();