{
  "title": "Sensor",
  "publicationStatus": "draft",
  "subtitle": "Testing the Sensor model type",
  "about": "",
  "models": [
    {
      "type": "sensor",
      "id": "signal1",
      "url": "models/sensor/sensor.json",
      "viewOptions": {
        "controlButtons": "",
        "showClock": true
      },
      "onLoad": [
        "function setButtonState() {",
        "  setComponentDisabled('start-button', !get('isPlayable'));",
        "  setComponentDisabled('stop-button', get('isStopped'));",
        "  setComponentDisabled('new-run-button', !get('hasPlayed'));",
        "  setComponentDisabled('analyze-data-button', !(get('hasPlayed') && get('isStopped') && canExportData()))",
        "}",
        "onPropertyChange('isPlayable', setButtonState);",
        "onPropertyChange('isStopped', setButtonState);",
        "onPropertyChange('hasPlayed', setButtonState);",
        "setButtonState();",
        "onPropertyChange('sensorType', function() {",
        "  if (get('sensorType') && !get('isNewRunInProgress')) {",
        "    syncAxisRangesToPropertyRanges('propertiesGraph');",
        "  }",
        "});"
      ]
    }
  ],
  "parameters": [
    {
      "name": "isNewRunInProgress",
      "initialValue": false
    }
  ],
  "components": [
    {
      "type": "graph",
      "id": "propertiesGraph",
      "title": "Sensor Reading",
      "xlabel": "Time (s)",
      "ymin": 0,
      "ymax": 6,
      "xmax": 30,
      "xTickCount": 6,
      "xFormatter": ".2s",
      "yFormatter": ".2s",
      "properties": [
        "sensorReading"
      ],
      "resetAxesOnReset": false
    },
    {
      "type": "button",
      "id": "start-button",
      "text": "Start",
      "tooltip": "Start the experiment run.",
      "action": "start();"
    },
    {
      "type": "button",
      "id": "stop-button",
      "text": "Stop",
      "tooltip": "Stop the experiment run.",
      "action": "stop();"
    },
    {
      "type": "button",
      "id": "new-run-button",
      "text": "New Run",
      "tooltip": "Set up a new experiment run.",
      "action": [
        "var tareValue = get('tareValue');",
        "set('isNewRunInProgress', true);",
        "reset({",
        "  retainParameters: ['sensorType'],",
        "  cause: 'new-run'",
        "});",
        "set('tareValue', tareValue);",
        "scrollXAxisToZero('propertiesGraph');",
        "set('isNewRunInProgress', false);"
      ]
    },
    {
      "type": "button",
      "id": "reset-button",
      "text": "Reset",
      "tooltip": "Reset the sensor.",
      "action": "reload();"
    },
    {
      "type": "button",
      "id": "analyze-data-button",
      "text": "Analyze Data",
      "tooltip": "Put data from the experiment run into DataGames.",
      "action": "exportData();"
    }
  ],
  "layout": {
    "below-model": [
      "propertiesGraph"
    ],
    "container-bottom": [
      "start-button",
      "stop-button",
      "new-run-button",
      "reset-button",
      "analyze-data-button"
    ]
  },
  "exports": {
    "perRun": ["sensorType"],
    "perTick": ["sensorReading"]
  },
  "template": [
    {
      "id": "below-model",
      "top": "model.bottom",
      "width": "model.width",
      "padding-right": "1em",
      "padding-top": "0.5em",
      "padding-bottom": "0.5em",
      "height": "0.8 * interactive.height"
    },
    {
      "id": "container-bottom",
      "top": "below-model.bottom",
      "width": "below-model.width"
    }
  ]
}