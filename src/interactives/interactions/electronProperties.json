{
  "title": "electronProperties",
  "publicationStatus": "draft",
  "subtitle": "",
  "about": "",
  "aspectRatio": 1.2,
  "fontScale": 1,
  "models": [
    {
      "type": "md2d",
      "id": "electronProperties$0",
      "url": "imports/legacy-mw-content/converted/interactions/exploring-electrons/electronProperties$0.json",
      "importedFrom": "imports/legacy-mw-content/interactions/exploring-electrons/electronProperties$0.mml",
      "viewOptions": {
        "controlButtons": ""
      },
      "onLoad": [
        "var radius = getElementProperties(2).radius,",
        "    xMax = get('viewPortWidth') + get('viewPortX') + radius,",
        "    yMin = get('viewPortY') - radius,",
        "    yMax = yMin + get('viewPortHeight') + radius,",
        "    eFieldProps = getShapeProperties(0);",
        "setTextBoxProperties(1,{x: eFieldProps.x, width: eFieldProps.width, y: 3.1, text: '+ + + + + +', textAlign: 'center'});",
        "setTextBoxProperties(0,{x: eFieldProps.x, width: eFieldProps.width, y: 0.95, text: '- - - - - - - -', textAlign: 'center'});",
        "setElectricFieldProperties({orientation: 'S'});",
        "onPropertyChange('time',function(time){",
        "  var props = getAtomProperties(0);",
        "  if (props.x > xMax || props.y > yMax || props.y < yMin) {",
        "    stop();",
        "  }",
        "});"
      ]
    }
  ],
  "components": [
    {
      "type": "button",
      "id": "send-pos-particle",
      "text": "Send + particle",
      "action": [
        "if (getNumberOfAtoms()>0) {",
        "  untraceAtom(0);",
        "  removeAtom(0);",
        "}",
        "addAtom({element: 2, x: 0.5, y: get('particleY'), vx: 0.001, vy: 0, charge: 0.01});",
        "start();",
        "traceAtom(0);"
      ]
    },
    {
      "type": "button",
      "id": "send-neg-particle",
      "text": "Send - particle",
      "action": [
        "if (getNumberOfAtoms()>0) {",
        "  untraceAtom(0);",
        "  removeAtom(0);",
        "}",
        "addAtom({element: 2, x: 0.5, y: get('particleY'), vx: 0.001, vy: 0, charge: -0.01});",
        "start();",
        "traceAtom(0);"
      ]
    },
    {
      "type": "button",
      "id": "send-mystery-particle",
      "text": "Send mystery particle from Crookes tube",
      "action": [
        "if (getNumberOfAtoms()>0) {",
        "  untraceAtom(0);",
        "  removeAtom(0);",
        "}",
        "addAtom({element: 0, x: 0.5, y: get('particleY'), vx: 0.001, vy: 0, charge: -0.01});",
        "start();",
        "traceAtom(0);"
      ]
    },
    {
      "type": "slider",
      "id": "set-atom-mass",
      "min": 1,
      "max": 12,
      "steps": 11,
      "labels": [
        {
          "value": 1,
          "label": "H"
        },
        {
          "value": 7,
          "label": "Li"
        },
        {
          "value": 12,
          "label": "C"
        }
      ],
      "property": "mysteryMass"
    },
    {
      "type": "text",
      "id": "label-atom-mass",
      "text": "Atom mass:"
    },
    {
      "type": "checkbox",
      "id": "enable-slow-motion",
      "text": "Slow motion",
      "property": "isSlowMotionEnabled"
    },
    {
      "type": "slider",
      "id": "set-charge-on-plates",
      "min": -20,
      "max": 20,
      "steps": 20,
      "width": "60%",
      "labels": [
        {
          "value": -20,
          "label": "Very high +/-"
        },
        {
          "value": 20,
          "label": "Very high -/+"
        },
        {
          "value": 0,
          "label": "None"
        }
      ],
      "title": "Adjust charge on plates",
      "property": "plateChargeProxy"
    }
  ],
  "parameters": [
    {
      "name": "mysteryMass",
      "initialValue": 7,
      "onChange": "setElementProperties(2,{mass: value});"
    },
    {
      "name": "particleY",
      "initialValue": 1.92,
      "onChange": []
    },
    {
      "name": "isSlowMotionEnabled",
      "initialValue": false,
      "onChange": "set('timeStep', value ? 0.1 : 1);"
    },
    {
      "name": "plateChargeProxy",
      "initialValue": 8,
      "onChange": [
        "var mag = Math.abs(value),",
        "    s = 192-Math.round((mag/10.0)*128),",
        "    x = 192,",
        "    blue = 'rgb(' + s + ',' + s + ',' + x + ')',",
        "    red  = 'rgb(' + x + ',' + s + ',' + s + ')',",
        "    white = 'rgb(192,192,192)',",
        "    negText = '- - - - - - - - -',",
        "    posText = '+ + + + + +';",
        "if (value < 0) {",
        "  setTextBoxProperties(1,{backgroundColor: blue, text: negText});",
        "  setTextBoxProperties(0,{backgroundColor: red,  text: posText});",
        "  setElectricFieldProperties(0,{intensity: mag/100000, orientation: 'N'});",
        "} else if (value > 0) {",
        "  setTextBoxProperties(0,{backgroundColor: blue, text: negText});",
        "  setTextBoxProperties(1,{backgroundColor: red,  text: posText});",
        "  setElectricFieldProperties(0,{intensity: mag/100000, orientation: 'S'});",
        "} else {",
        "  setTextBoxProperties(0,{backgroundColor: white, text: ''});",
        "  setTextBoxProperties(1,{backgroundColor: white, text: ''});",
        "  setElectricFieldProperties(0,{intensity: mag/100000, orientation: 'N'});",
        "}"
      ]
    }
  ],
  "layout": {
    "bottom": [
      ["send-neg-particle", "send-pos-particle"],
      ["label-atom-mass","set-atom-mass"],
      ["send-mystery-particle", "enable-slow-motion"],
      ["set-charge-on-plates"]
    ]
  },
  "template": [
    {
      "id": "bottom",
      "top": "model.bottom",
      "left": "model.left",
      "width": "model.width",
      "align": "center"
    }
  ]
}
