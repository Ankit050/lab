<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Vernier GoIO Sensor Grapher</title>
    <link href='style.css' rel='stylesheet' type='text/css' />
    <script type="text/javascript" src="../../vendor/modernizr/modernizr.js"></script>
    <script type="text/javascript">
      if (!Modernizr.svg) { window.location = '../../browser-upgrade.html'; }
    </script>
    <script type="text/javascript" src="../../vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../vendor/d3/d3.v2.js"></script>
    <script type="text/javascript" src="../../lab/lab.grapher.js"></script>
    <script src="sensor.js"></script>
  </head>
  <body>
    <p class="sensor-selector">Select a Vernier GoIO Sensor Type:
      <select id="sensor-type-selector">
        <option value="select-sensor" disabled selected>select sensor ...</option>
        <option value="GoIO temperature">GoIO temperature</option>
        <option value="LabQuest temperature">LabQuest temperature</option>
        <option value="GoIO light">GoIO light</option>
        <option value="LabQuest light">LabQuest light</option>
        <option value="GoIO distance">GoIO distance</option>
        <option value="GoIO force (5N) (manual config)">GoIO force (5N) (manual config)</option>
        <option value="GoIO force (5N) (built-in config)">GoIO force (5N) (built-in config)</option>
        <option value="LabQuest force (5N)">LabQuest force (5N)</option>
        <option value="GoIO force (50N)">GoIO force (50N)</option>
        <option value="LabQuest force (50N)">LabQuest force (50N)</option>
        <option value="GoIO CO2">GoIO CO2</option>
        <option value="Pseudo Sound">Pseudo Sound</option>
      </select>
    </p>
    <div id="vis">
      <div id="graph" class="chart"></div>
    </div>
    <div id="applet-container" ></div>
    <p>
      <b>Temperature Sensors</b>: connect either a <a href="http://www.vernier.com/products/sensors/temperature-sensors/go-temp/">Vernier GoTemp</a>
      or a <a href="http://www.vernier.com/products/interfaces/go-link/">Vernier GoLink</a> with an attached
      <a href="http://www.vernier.com/products/sensors/temperature-sensors/sts-bta/">Temperature Sensor</a>.
    </p>
    <p>
      <b>Light Sensor</b>: connect a <a href="http://www.vernier.com/products/sensors/ls-bta/">Vernier Light Sensor</a>
      to a <a href="http://www.vernier.com/products/interfaces/go-link/">Vernier GoLink</a>.
    </p>
    <p>
      <b>Distance Sensor</b>: connect a <a href="http://www.vernier.com/products/sensors/motion-detectors/go-mot/">Vernier Go!Motion</a>
      ultrasonic distance-ranging sensor.
    </p>
    <p>
      This example uses a small Java applet running in the background to collect data from the probe and pass it to the graph.
    </p>
    <script type="text/javascript">
      var vis = document.getElementById("vis"),
          blankGraphOptions = {
            title: "GoIO Sensor Graph",
            xlabel:    "Time (s)",
            xmin: 0, xmax: 60,
            ylabel:    "Y Axis",
            ymin: 10, ymax: 40,
            points: [],
            circleRadius: false,
            dataChange: false
          },
          graph = Lab.grapher.graph("#graph", blankGraphOptions, "Select a Sensor Type"),
          applet,
          appletContainer = document.getElementById("applet-container"),
          appletLoadingStr = "Sensor Applet Loading ...",
          sensorTypeSelector = document.getElementById("sensor-type-selector"),
          temperature_data = [],
          distance_data = [],
          force_data = [],
          light_data = [],
          co2_data = [],
          sound_data = [],
          sensorType,
          sensorConfigurations = {
            "GoIO temperature": {
              "graphOptions": {
                title: "GoIO Temperature Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Temperature, (Degrees C)",
                ymin: 10, ymax: 40,
                points: temperature_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="temperature"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "LabQuest temperature": {
              "graphOptions": {
                title: "LabQuest Temperature Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Temperature, (Degrees C)",
                ymin: 10, ymax: 40,
                points: temperature_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/labquest-jna/labquest-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="labquest"/>',
                               '  <param name="probeType" value="temperature"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO distance": {
              "graphOptions": {
                title: "GoIO Distance Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 20,
                ylabel:    "Distance, (m)",
                ymin: 0, ymax: 4,
                points: distance_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="distance"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO force (5N) (manual config)": {
              "graphOptions": {
                title: "GoIO Force (5N) Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Force, (N)",
                ymin: -5, ymax: 5,
                points: force_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="manual"/>',
                               '  <param name="deviceId" value="13"/>',
                               '  <param name="probeType" value="manual"/>',
                               '  <param name="period" value="0.01"/>',
                               '  <param name="precision" value="-2"/>',
                               '  <param name="min" value="-4.0"/>',
                               '  <param name="max" value="4.0"/>',
                               '  <param name="sensorPort" value="0"/>',
                               '  <param name="stepSize" value="0.01"/>',
                               '  <param name="sensorType" value="5"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO force (5N) (built-in config)": {
              "graphOptions": {
                title: "GoIO Force (5N) Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Force, (N)",
                ymin: -5, ymax: 5,
                points: force_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="force 5n"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "LabQuest force (5N)": {
              "graphOptions": {
                title: "LabQuest Force (5N) Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Force, (N)",
                ymin: -5, ymax: 5,
                points: force_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="labquest"/>',
                               '  <param name="probeType" value="force 5n"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO force (50N)": {
              "graphOptions": {
                title: "GoIO Force (50N) Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Force, (N)",
                ymin: -50, ymax: 50,
                points: force_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="force 50n"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "LabQuest force (50N)": {
              "graphOptions": {
                title: "LabQuest Force (50N) Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Force, (N)",
                ymin: -50, ymax: 50,
                points: force_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="labquest"/>',
                               '  <param name="probeType" value="force 50n"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO CO2": {
              "graphOptions": {
                title: "GoIO CO2 Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "CO2, (ppm)",
                ymin: 0, ymax: 5000,
                points: co2_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="force 50n"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "Pseudo Sound": {
              "graphOptions": {
                title: "Pseudo Sound Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Sound level, (db)",
                ymin: 0, ymax: 120,
                points: sound_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="pseudo"/>',
                               '  <param name="probeType" value="manual"/>',
                               '  <param name="period" value="0.1"/>',
                               '  <param name="precision" value="-1"/>',
                               '  <param name="min" value="0.0"/>',
                               '  <param name="max" value="120.0"/>',
                               '  <param name="sensorPort" value="0"/>',
                               '  <param name="stepSize" value="1.0"/>',
                               '  <param name="sensorType" value="14"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "GoIO light": {
              "graphOptions": {
                title: "GoIO Light Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Light, (Lux)",
                ymin: 0, ymax: 10000,
                points: light_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="golink"/>',
                               '  <param name="probeType" value="light"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            },
            "LabQuest light": {
              "graphOptions": {
                title: "LabQuest Light Sensor",
                xlabel:    "Time (s)",
                xmin: 0, xmax: 60,
                ylabel:    "Light, (Lux)",
                ymin: 0, ymax: 10000,
                points: light_data,
                circleRadius: false,
                dataChange: false
              },
              "appletString": ['<applet id="sensor-applet", codebase="/jnlp", code="org.concord.sensor.applet.SensorApplet"',
                               '     width="1" height="1" MAYSCRIPT="true"',
                               '     archive="',
                               '           com/sun/jna/jna.jar,',
                               '           org/concord/sensor/sensor.jar,',
                               '           org/concord/sensor/goio-jna/goio-jna.jar,',
                               '           org/concord/sensor/sensor-vernier/sensor-vernier.jar,',
                               '           org/concord/sensor/sensor-applets/sensor-applets.jar"',
                               '     MAYSCRIPT="true">',
                               '  <param name="device" value="labquest"/>',
                               '  <param name="probeType" value="light"/>',
                               '  <param name="MAYSCRIPT" value="true"/>',
                               '  Your browser is completely ignoring the applet tag!',
                               '</applet>'].join('\n')
            }
          };

      function sensorTypeSelectorHandler() {
        graph.notify(appletLoadingStr);
        sensorType = sensorTypeSelector.value;
        sensorConfig = sensorConfigurations[sensorType];
        graph.reset(sensorConfig.graphOptions, appletLoadingStr);
        d3.selectAll(".sensorbuttons").remove();
        appletContainer.innerHTML = sensorConfig.appletString;
        applet = document.getElementById("sensor-applet");
        applet_grapher = new sensor.AppletGrapher(applet, vis, graph, sensorType, "applet_grapher.JsListener()", graph.notify);
      }
      sensorTypeSelector.value = "select-sensor";
      sensorTypeSelector.onchange = sensorTypeSelectorHandler;
    </script>
  </body>
</html>
