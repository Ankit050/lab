(function(){typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),grapher={version:"0.0.1"},grapher.data=function(e){var t=0,n=e.length,r=[];for(t=0;t<n;t+=2)r.push({x:e[t],y:e[t+1]});return r},grapher.axis={axisProcessDrag:function(e,t,n){var r,i,s=n,o=0,u=n[0],a=n[1],f=a-u;if(t!==0)if(u>=0&&a>u)o=u,r=e-o,i=r*.2+o,t>i&&(change=r/(t-o),f=a-o,s=[u,u+f*change]);else if(u<0&&a>0){o=0,r=e-o,i=r*.2+o;if(e>=0&&t>i||e<0&&t<i)change=r/(t-o),s=[u*change,a*change]}else u<0&&a<0&&(o=a,r=e-o,i=r*.2+o,t<i&&(change=r/(t-o),f=u-o,s=[a+f*change,a]));return s}},grapher.indexedData=function(e,t){var n=0,r=t||0,i=e.length,s=[];for(n=0;n<i;n++)s.push({x:n+r,y:e[n]});return s},grapher.graph=function(e,t,n){function H(e){if(e)for(var t in P)e[t]===undefined&&(e[t]=P[t]);else e=P;return e}function B(){r<=L.icon?(L.category="icon",L.value=0):r<=L.tiny?(L.category="tiny",L.value=1):r<=L.small?(L.category="small",L.value=2):r<=L.medium?(L.category="medium",L.value=3):r<=L.large?(L.category="large",L.value=4):(L.category="extralarge",L.value=5)}function j(t,n){arguments.length?(r=t,i=n,s.style.width=r+"px",s.style.height=i+"px"):(r=e.property("clientWidth"),i=e.property("clientHeight")),B(),T=layout.getDisplayProperties(),N=T.emsize}function F(e,s){if(e||!t)t=H(e);o!==undefined&&(o.remove(),o=undefined),s&&(n=s),t.dataChange?x="ns-resize":x="crosshair",j(),t.xrange=t.xmax-t.xmin,t.yrange=t.ymax-t.ymin,t.datacount=2,C=t.strokeWidth;switch(L.value){case 0:m={top:4,right:4,bottom:4,left:4};break;case 1:m={top:8,right:8,bottom:8,left:8};break;case 2:m={top:t.title?25:15,right:15,bottom:20,left:20};break;case 3:m={top:t.title?30:20,right:30,bottom:t.xlabel?60:10,left:t.ylabel?70:45};break;default:m={top:t.title?40:20,right:30,bottom:t.xlabel?60:10,left:t.ylabel?70:45}}Object.prototype.toString.call(t.title)==="[object Array]"?D=t.title:D=[t.title],D.reverse(),L.value>2?m.top+=(D.length-1)*L.value/3*L.value/3*N*22:D=[D[0]],g={width:r-m.left-m.right,height:i-m.top-m.bottom},w=function(e){return e[0]},E=function(e){return e[1]},y=d3.scale.linear().domain([t.xmin,t.xmax]).range([0,g.width]),b=d3.scale.linear().domain([t.ymax,t.ymin]).nice().range([0,g.height]).nice(),S=d3.svg.line().x(function(e,t){return y(points[t][0])}).y(function(e,t){return b(points[t][1])})}function I(p){function d(e){e?v.text(e):v.text("")}function w(){var e=t.yrange/2,n=e/2,r;return t.datacount=g.width/30,t.xtic=t.xrange/t.datacount,t.ytic=t.yrange/t.datacount,r=d3.range(t.datacount).map(function(r){return[r*t.xtic+t.xmin,t.ymin+n+Math.random()*e]}),r}function E(){if(!_)return;switch(d3.event.keyCode){case 8:case 46:if(t.dataChange){var e=points.indexOf(_);points.splice(e,1),_=points.length?points[e>0?e-1:0]:null,B()}d3.event&&d3.event.keyCode&&(d3.event.preventDefault(),d3.event.stopPropagation())}}function T(){m={top:t.title?40:20,right:30,bottom:t.xlabel?60:10,left:t.ylabel?70:45},g.width=r-m.left-m.right,g.height=i-m.top-m.bottom,a.attr("width",g.width).attr("height",g.height)}function k(){y.domain([t.xmin,t.xmax]).range([0,g.width])}function P(){b.domain([t.ymin,t.ymax]).range([g.height,0])}function H(){var e=function(e){return"translate("+y(e)+",0)"},t=function(e){return"translate(0,"+b(e)+")"},n=function(e){return e?"#ccc":"#666"},r=y.tickFormat(d3.format(".3r")),i=y.tickFormat(d3.format(".3r")),s=u.selectAll("g.x").data(y.ticks(10),String).attr("transform",e);s.select("text").text(r);var o=s.enter().insert("g","a").attr("class","x").attr("transform",e);o.append("line").attr("stroke",n).attr("y1",0).attr("y2",g.height),L.value>1&&o.append("text").attr("class","axis").style("font-size",L.value/2.7*100+"%").attr("y",g.height).attr("dy","1em").attr("text-anchor","middle").text(r).style("cursor","ew-resize").on("mouseover",function(e){d3.select(this).style("font-weight","bold")}).on("mouseout",function(e){d3.select(this).style("font-weight","normal")}).on("mousedown.drag",R).on("touchstart.drag",R),s.exit().remove();var f=u.selectAll("g.y").data(b.ticks(10),String).attr("transform",t);f.select("text").text(i);var l=f.enter().insert("g","a").attr("class","y").attr("transform",t).attr("background-fill","#FFEEB6");l.append("line").attr("stroke",n).attr("x1",0).attr("x2",g.width),L.value>1&&l.append("text").attr("class","axis").style("font-size",L.value/2.7*100+"%").attr("x",-3).attr("dy",".35em").attr("text-anchor","end").text(i).style("cursor","ns-resize").on("mouseover",function(e){d3.select(this).style("font-weight","bold")}).on("mouseout",function(e){d3.select(this).style("font-weight","normal")}).on("mousedown.drag",U).on("touchstart.drag",U),f.exit().remove(),a.call(d3.behavior.zoom().x(y).y(b).on("zoom",H)),B()}function B(){var e=u.select("path").attr("d",S(points)),n=u.select("svg").selectAll("circle").data(points,function(e){return e});t.circleRadius&&L.value>1&&(t.circleRadius<=4&&L.value<3||(n.enter().append("circle").attr("class",function(e){return e===_?"selected":null}).attr("cx",function(e){return y(e[0])}).attr("cy",function(e){return b(e[1])}).attr("r",t.circleRadius*(1+L.value)/4).style("stroke-width",t.circleRadius/6*(L.value-1.5)).style("cursor",x).on("mousedown.drag",z).on("touchstart.drag",z),n.attr("class",function(e){return e===_?"selected":null}).attr("cx",function(e){return y(e[0])}).attr("cy",function(e){return b(e[1])}).attr("r",t.circleRadius*(1+L.value)/4).style("stroke-width",t.circleRadius/6*(L.value-1.5)))),n.exit().remove(),d3.event&&d3.event.keyCode&&(d3.event.preventDefault(),d3.event.stopPropagation())}function q(){d3.event.preventDefault(),grapher.registerKeyboardHandler(E),d3.select("body").style("cursor","move");if(d3.event.altKey)if(d3.event.shiftKey&&t.addData){var e=d3.svg.mouse(u.node()),n=[];n[0]=y.invert(Math.max(0,Math.min(g.width,e[0]))),n[1]=b.invert(Math.max(0,Math.min(g.height,e[1]))),points.push(n),points.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),_=n,B()}else{var e=d3.svg.mouse(u[0][0]);A=y.invert(e[0]),O=b.invert(e[1]),M=!1,d3.event.stopPropagation()}}function R(e){document.onselectstart=function(){return!1},d3.event.preventDefault();var t=d3.svg.mouse(u[0][0]);A=y.invert(t[0])}function U(e){document.onselectstart=function(){return!1},d3.event.preventDefault();var t=d3.svg.mouse(u[0][0]);O=b.invert(t[1])}function z(e){grapher.registerKeyboardHandler(E),document.onselectstart=function(){return!1},_=M=e,B()}function W(){var e=d3.svg.mouse(u[0][0]),n,r,i,s=d3.event.changedTouches;d3.event.preventDefault(),M&&t.dataChange&&(M[1]=b.invert(Math.max(0,Math.min(g.height,e[1]))),B()),isNaN(A)||(d3.select("body").style("cursor","ew-resize"),y.domain(grapher.axis.axisProcessDrag(A,y.invert(e[0]),y.domain())),H(),d3.event.stopPropagation()),isNaN(O)||(d3.select("body").style("cursor","ns-resize"),b.domain(grapher.axis.axisProcessDrag(O,b.invert(e[1]),b.domain())),H(),d3.event.stopPropagation())}function X(){document.onselectstart=function(){return!0},d3.select("body").style("cursor","auto"),isNaN(A)||(A=Math.NaN,H()),isNaN(O)||(O=Math.NaN,H()),M=null}p||(p=e),p.each(function(){e=d3.select(this),this.clientWidth&&this.clientHeight&&(r=this.clientWidth,i=this.clientHeight,g.width=r-m.left-m.right,g.height=i-m.top-m.bottom),points=t.points||w(),k(),P(),o===undefined?(o=e.append("svg").attr("width",r).attr("height",i),u=o.append("g").attr("transform","translate("+m.left+","+m.top+")"),a=u.append("rect").attr("class","plot").attr("width",g.width).attr("height",g.height).style("fill","#EEEEEE").attr("pointer-events","all").on("mousedown.drag",q).on("touchstart.drag",q).call(d3.behavior.zoom().x(y).y(b).on("zoom",H)),f=u.append("svg").attr("class","viewbox").attr("top",0).attr("left",0).attr("width",g.width).attr("height",g.height).attr("viewBox","0 0 "+g.width+" "+g.height).attr("class","line"),f.append("path").attr("class","line").style("stroke-width",C).attr("d",S(points)),t.title&&L.value>1&&(l=u.selectAll("text").data(D,function(e){return e}),l.enter().append("text").attr("class","title").style("font-size",L.value/2.4*100+"%").text(function(e){return e}).attr("x",g.width/2).attr("dy",function(e,t){return-0.5+ -1*L.value/2.8*t*N+"em"}).style("text-anchor","middle")),t.xlabel&&L.value>2&&(c=u.append("text").attr("class","axis").style("font-size",L.value/2.6*100+"%").text(t.xlabel).attr("x",g.width/2).attr("y",g.height).attr("dy","2.4em").style("text-anchor","middle")),t.ylabel&&L.value>2&&(h=u.append("g").append("text").attr("class","axis").style("font-size",L.value/2.6*100+"%").text(t.ylabel).style("text-anchor","middle").attr("transform","translate(-40 "+g.height/2+") rotate(-90)")),d3.select(s).on("mousemove.drag",W).on("touchmove.drag",W).on("mouseup.drag",X).on("touchend.drag",X),v=u.append("text").attr("class","graph-notification").text(n).attr("x",g.width/2).attr("y",g.height/2).style("text-anchor","middle")):(u.attr("width",r).attr("height",i),a.attr("width",g.width).attr("height",g.height),f.attr("top",0).attr("left",0).attr("width",g.width).attr("height",g.height).attr("viewBox","0 0 "+g.width+" "+g.height),t.title&&L.value>1&&l.each(function(e,t){d3.select(this).attr("x",g.width/2),d3.select(this).attr("dy",function(e,t){return 1.4*t-D.length+"em"})}),t.xlabel&&L.value>1&&c.attr("x",g.width/2).attr("y",g.height),t.ylabel&&L.value>1&&h.attr("transform","translate(-40 "+g.height/2+") rotate(-90)"),v.attr("x",g.width/2).attr("y",g.height/2)),H()}),I.elem=e,I.redraw=H,I.update=B,I.notify=d,I.initialize=F,I.updateXScale=k,I.updateYScale=P,I.scale=j}function q(){t.title&&l&&l.text(t.title)}function R(){t.xlabel&&c&&c.text(t.xlabel)}function U(){t.ylabel&&h?h.text(t.ylabel):h.style("display","none")}function z(e){return y(e[0])}function W(e){return b(e[1])}function X(){redraw()}var r=600,i=300,s;arguments.length&&(e=d3.select(e),s=e.node(),r=e.property("clientWidth"),i=e.property("clientHeight"));var o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L={category:"medium",value:3,icon:120,tiny:240,small:480,medium:960,large:1920},A=Math.NaN,O=Math.NaN,M=null,_=null,D=[],P={xmax:60,xmin:0,ymax:40,ymin:0,title:"Simple Graph1",xlabel:"X Axis",ylabel:"Y Axis",circleRadius:10,strokeWidth:2,dataChange:!0,addData:!0,points:!1,notification:!1};return F(t),I.margin=function(e){return arguments.length?(margin=e,I):margin},I.xmin=function(e){return arguments.length?(t.xmin=e,t.xrange=t.xmax-t.xmin,I.updateXScale&&(I.updateXScale(),I.redraw()),I):t.xmin},I.xmax=function(e){return arguments.length?(t.xmax=e,t.xrange=t.xmax-t.xmin,I.updateXScale&&(I.updateXScale(),I.redraw()),I):t.xmax},I.ymin=function(e){return arguments.length?(t.ymin=e,t.yrange=t.ymax-t.ymin,I.updateYScale&&(I.updateYScale(),I.redraw()),I):t.ymin},I.ymax=function(e){return arguments.length?(t.ymax=e,t.yrange=t.ymax-t.ymin,I.updateYScale&&(I.updateYScale(),I.redraw()),I):t.ymax},I.xLabel=function(e){return arguments.length?(t.xlabel=e,R(),I):t.xlabel},I.yLabel=function(e){return arguments.length?(t.ylabel=e,U(),I):t.ylabel},I.title=function(e){return arguments.length?(t.title=e,q(),I):t.title},I.width=function(e){return arguments.length?(g.width=e,I):g.width},I.height=function(e){return arguments.length?(g.height=e,I):g.height},I.x=function(e){return arguments.length?(w=e,I):w},I.y=function(e){return arguments.length?(E=e,I):E},I.elem=function(t){return arguments.length?(e=d3.select(t),e.call(I),I):e},I.data=function(e){if(!arguments.length)return points;var t=y.domain(),n=t[1]-t[0],r=n*.8;return points=e,points.length>t[1]?(t[0]+=r,t[1]+=r,y.domain(t),I.redraw()):I.update(),I},I.add_data=function(e){if(!arguments.length)return points;var t=y.domain(),n=t[1]-t[0],r=n*.8,i;if(e instanceof Array&&e.length>0)if(e[0]instanceof Array)for(i=0;i<e.length;i++)points.push(e[i]);else{if(e.length!==2)throw new Error("invalid argument to graph.add_data() "+e+" length should === 2.");points.push(e)}return points[points.length-1][0]>t[1]?(t[0]+=r,t[1]+=r,y.domain(t),I.redraw()):I.update(),I},I.reset=function(e,t){return arguments.length?I.initialize(e,t):I.initialize(),I(),I},I.resize=function(e,t){return I.scale(e,t),I.initialize(),I(),I},e&&e.call(I),I},grapher.realTimeGraph=function(e,t){function j(e,t,n){var r=0,i=t||0,s=e.length,o=[];n=n||1;for(r=0;r<s;r++)o.push({x:(r+i)*n,y:e[r]});return o}function F(){return A?A.length:!1}function I(e,n){i=e,s=n,r.style.width=i+"px",r.style.height=s+"px",o={top:t.title?40:20,right:30,bottom:t.xlabel?60:10,left:t.ylabel?70:45},E=layout.getDisplayProperties().emsize,Object.prototype.toString.call(t.title)==="[object Array]"?S=t.title:S=[t.title],o.top+=(S.length-1)*E*20,width=i-o.left-o.right,height=s-o.top-o.bottom,u={width:width,height:height},a=u.width,f=u.height,c.domain([t.xmin,t.xmax]).range([0,u.width]),d.domain([t.ymin,t.ymax]).nice().range([u.height,0]).nice(),h=Math.NaN,v=Math.NaN,b=null}function q(){function e(){var t=c.tickFormat(10),r=d.tickFormat(8),i=C.selectAll("g.x").data(c.ticks(8),String).attr("transform",p);i.select("text").text(t);var s=i.enter().insert("g","a").attr("class","x").attr("transform",p);s.append("line").attr("stroke",l).attr("y1",0).attr("y2",u.height),s.append("text").attr("y",u.height).attr("dy","1em").attr("text-anchor","middle").style("cursor","ew-resize").text(t).on("mouseover",function(e){d3.select(this).style("font-weight","bold")}).on("mouseout",function(e){d3.select(this).style("font-weight","normal")}).on("mousedown.drag",T).on("touchstart.drag",T),i.exit().remove();var o=C.selectAll("g.y").data(d.ticks(10),String).attr("transform",m);o.select("text").text(r);var a=o.enter().insert("g","a").attr("class","y").attr("transform",m).attr("background-fill","#FFEEB6");a.append("line").attr("stroke",l).attr("x1",0).attr("x2",u.width),a.append("text").attr("x",-3).attr("dy",".35em").attr("text-anchor","end").style("cursor","ns-resize").text(r).on("mouseover",function(e){d3.select(this).style("font-weight","bold")}).on("mouseout",function(e){d3.select(this).style("font-weight","normal")}).on("mousedown.drag",N).on("touchstart.drag",N),o.exit().remove(),k.call(d3.behavior.zoom().x(c).y(d).on("zoom",e)),n()}function n(e){var t,i=r.children[0].getElementsByTagName("rect")[0];et(e);if(q.selectable_points){var s=C.selectAll("circle").data(A,function(e){return e});s.enter().append("circle").attr("class",function(e){return e===w?"selected":null}).attr("cx",function(e){return x(e.x)}).attr("cy",function(e){return y(e.y)}).attr("r",1).on("mousedown",function(e){w=b=e,n()}),s.attr("class",function(e){return e===w?"selected":null}).attr("cx",function(e){return x(e.x)}).attr("cy",function(e){return y(e.y)}),s.exit().remove()}d3.event&&d3.event.keyCode&&(d3.event.preventDefault(),d3.event.stopPropagation())}function E(){d3.event.preventDefault(),k.style("cursor","move");if(d3.event.altKey){var e=d3.svg.mouse(C[0][0]);h=c.invert(e[0]),v=d.invert(e[1]),b=!1,d3.event.stopPropagation()}}function T(e){document.onselectstart=function(){return!1},d3.event.preventDefault();var t=d3.svg.mouse(C[0][0]);h=c.invert(t[0])}function N(e){document.onselectstart=function(){return!1},d3.event.preventDefault();var t=d3.svg.mouse(C[0][0]);v=d.invert(t[1])}function P(){var t=d3.svg.mouse(C[0][0]),n,r,i,s=d3.event.changedTouches;document.onselectstart=function(){return!0},d3.event.preventDefault(),isNaN(h)||(d3.select("body").style("cursor","ew-resize"),c.domain(grapher.axis.axisProcessDrag(h,c.invert(t[0]),c.domain())),e(),d3.event.stopPropagation()),isNaN(v)||(d3.select("body").style("cursor","ns-resize"),d.domain(grapher.axis.axisProcessDrag(v,d.invert(t[1]),d.domain())),e(),d3.event.stopPropagation())}function H(){d3.select("body").style("cursor","auto"),document.onselectstart=function(){return!0},isNaN(h)||(e(),h=Math.NaN),isNaN(v)||(e(),v=Math.NaN),b=null}function B(e){M={x:A[e].x,y:A[e].y}}function R(){var t,r=c.domain(),i=r[1]-r[0],s=A.length*D,o=i*.9;s>r[1]?(r[0]+=o,r[1]+=o,c.domain(r),e()):n()}function U(e){if(A.length===0)return;M=!1;var t=A.length,n=t*D,r={x:n,y:e},i,s;A.push(r),R()}function z(e){if(A.length===0)return;U(e),R()}function W(e){if(A.length===0)return;M=!1;var t=A.length,n=t*D,r=n-D,i={x:n,y:e},s=c.call(self,r,r),o=d.call(self,A[t-1].y,t-1),u,a;A.push(i),u=c.call(self,n,n),a=d.call(self,e,n),gctx.beginPath(),gctx.moveTo(s,o),gctx.lineTo(u,a),gctx.stroke()}function X(e){for(var t=0;t<O.length;t++)A=O[t],U(e[t]);R()}function V(e){for(var t=0;t<O.length;t++)A=O[t],$(t),W(e[t])}function $(e,t){var n=t?.4:1;switch(e){case 0:gctx.strokeStyle="rgba(160,00,0,"+n+")";break;case 1:gctx.strokeStyle="rgba(44,160,0,"+n+")";break;case 2:gctx.strokeStyle="rgba(44,0,160,"+n+")"}}function J(e){var n;O=[];if(Object.prototype.toString.call(e)==="[object Array]")for(n=0;n<e.length;n++)A=j(e[n],0,D),O.push(A);else A=j(t.dataset,0,D),O=[A];R()}function K(t){x=d3.scale.linear().domain([0,t]).range([0,a]),q.xmax=t,x_tics_scale=d3.scale.linear().domain([q.xmin*q.sample,q.xmax*q.sample]).range([0,a]),n(),e()}function Q(t){y=d3.scale.linear().domain([t,0]).range([0,f]),q.ymax=t,n(),e()}function G(){gcanvas.width=gcanvas.width,gctx.fillStyle="rgba(0,255,0, 0.05)",gctx.fillRect(0,0,gcanvas.width,gcanvas.height),gctx.strokeStyle="rgba(255,65,0, 1.0)"}function Y(){C.select("path.line").attr("d",[]),gcanvas.style.zIndex=100}function Z(){gcanvas.style.zIndex=-100,n()}function et(e){var t,n,r,i,s,o;typeof e=="undefined"?s=O[0].length:s=e;if(A.length===0)return;G(),gctx.fillRect(0,0,gcanvas.width,gcanvas.height);for(t=0;t<O.length;t++){A=O[t],px=c.call(self,0,0),i=d.call(self,A[0].y,0),n=0,lengthX=0,$(t),gctx.beginPath(),gctx.moveTo(px,i),o=s-1;for(n=0;n<o;n++)lengthX+=D,px=c.call(self,lengthX,lengthX),i=d.call(self,A[n].y,lengthX),gctx.lineTo(px,i);gctx.stroke(),o=A.length-1;if(n<o){$(t,!0);for(;n<o;n++)lengthX+=D,px=c.call(self,lengthX,lengthX),i=d.call(self,A[n].y,lengthX),gctx.lineTo(px,i);gctx.stroke()}}}function tt(){gcanvas=document.createElement("canvas"),r.appendChild(gcanvas),gcanvas.style.zIndex=-100,rt(gcanvas)}function nt(){rt(gcanvas),et()}function rt(e){var t={};t.rect=r.children[0].getElementsByTagName("rect")[0],t.width=t.rect.width.baseVal.value,t.height=t.rect.height.baseVal.value,t.left=t.rect.getCTM().e,t.top=t.rect.getCTM().f,e.style.position="absolute",e.width=t.width,e.height=t.height,e.style.width=t.width+"px",e.style.height=t.height+"px",e.offsetLeft=t.left,e.offsetTop=t.top,e.style.left=t.left+"px",e.style.top=t.top+"px",e.style.border="solid 1px red",e.style.pointerEvents="none",e.className+="canvas-overlay",gctx=gcanvas.getContext("2d"),gctx.globalCompositeOperation="source-over",gctx.lineWidth=1,gctx.fillStyle="rgba(0,255,0, 0.05)",gctx.fillRect(0,0,e.width,gcanvas.height),gctx.strokeStyle="rgba(255,65,0, 1.0)",gcanvas.style.border="solid 1px red"}I(i,s),C===undefined?(C=d3.select(r).append("svg").attr("width",i).attr("height",s).append("g").attr("transform","translate("+o.left+","+o.top+")"),k=C.append("rect").attr("class","plot").attr("width",u.width).attr("height",u.height).style("fill","#EEEEEE").attr("pointer-events","all").on("mousedown",E).on("touchstart",E),k.call(d3.behavior.zoom().x(c).y(d).on("zoom",e)),L=C.append("svg").attr("class","viewbox").attr("top",0).attr("left",0).attr("width",u.width).attr("height",u.height).attr("viewBox","0 0 "+u.width+" "+u.height).append("path").attr("class","line").attr("d",g(A)),_=L.append("path").attr("class","marker").attr("d",[]),t.title&&(title=C.selectAll("text").data(S,function(e){return e}),title.enter().append("text").attr("class","title").text(function(e){return e}).attr("x",u.width/2).attr("dy",function(e,t){return 1.4*t-S.length+"em"}).style("text-anchor","middle")),t.xlabel&&C.append("text").attr("class","xlabel").text(t.xlabel).attr("x",u.width/2).attr("y",u.height).attr("dy","2.4em").style("text-anchor","middle"),t.ylabel&&C.append("g").append("text").attr("class","ylabel").text(t.ylabel).style("text-anchor","middle").attr("transform","translate(-40 "+u.height/2+") rotate(-90)"),d3.select(r).on("mousemove.drag",P).on("touchmove.drag",P).on("mouseup.drag",H).on("touchend.drag",H),tt()):(d3.select(r).select("svg").attr("width",i).attr("height",s),C.select("rect.plot").attr("width",u.width).attr("height",u.height).style("fill","#EEEEEE"),C.select("svg.viewbox").attr("top",0).attr("left",0).attr("width",u.width).attr("height",u.height).attr("viewBox","0 0 "+u.width+" "+u.height),t.title&&C.select("text.title").attr("x",u.width/2).attr("dy","-1em"),t.xlabel&&C.select("text.xlabel").attr("x",u.width/2).attr("y",u.height),t.ylabel&&C.select("text.ylabel").attr("transform","translate(-40 "+u.height/2+") rotate(-90)"),C.selectAll("g.x").remove(),C.selectAll("g.y").remove(),nt()),e(),q.node=r,q.scale=I,q.update=n,q.redraw=e,q.number_of_points=F,q.new_data=J,q.add_point=z,q.add_points=X,q.add_canvas_point=W,q.add_canvas_points=V,q.initialize_canvas=tt,q.show_canvas=Y,q.hide_canvas=Z,q.clear_canvas=G,q.update_canvas=et,q.showMarker=B,q.change_xaxis=K,q.change_yaxis=Q}var n=d3.select(e),r=n.node(),i=n.property("clientWidth"),s=n.property("clientHeight"),o,u,a,f,l=function(e){return e?"#ccc":"#666"},c=d3.scale.linear(),h,p=function(e){return"translate("+c(e)+",0)"},d=d3.scale.linear(),v,m=function(e){return"translate(0,"+d(e)+")"},g=d3.svg.line().x(function(e,t){return c(A[t].x)}).y(function(e,t){return d(A[t].y)}),b,w,E=layout.getDisplayProperties().emsize,S=[],T,N,C,k,L,A,O,M,_,D,P={title:"graph",xlabel:"x-axis",ylabel:"y-axis",xmax:10,xmin:0,ymax:10,ymin:0,dataset:[0],selectable_points:!0,circleRadius:!1,dataChange:!1,points:!1,sample:1};if(t)for(var H in P)t[H]===undefined&&(t[H]=P[H]);else t=P;D=t.sample,t.dataChange?circleCursorStyle="ns-resize":circleCursorStyle="crosshair",t.xrange=t.xmax-t.xmin,t.yrange=t.ymax-t.ymin,I(i,s),O=[];if(Object.prototype.toString.call(t.dataset[0])==="[object Array]"){for(var B=0;B<t.dataset.length;B++)O.push(j(t.dataset[B],0,D));A=O[0]}else A=j(t.dataset,0),O=[A];return q.resize=function(e,t){q.scale(e,t),q()},q.add_data=function(e){if(!arguments.length)return A;var t=c.domain(),n=t[1]-t[0],r=n*.8,i;if(e instanceof Array&&e.length>0)if(e[0]instanceof Array)for(i=0;i<e.length;i++)A.push(e[i]);else{if(e.length!==2)throw new Error("invalid argument to graph.add_data() "+e+" length should === 2.");A.push(e)}return A[A.length-1][0]>t[1]?(t[0]+=r,t[1]+=r,c.domain(t),q.redraw()):q.update(),q},r&&q(),q},grapher.colors=function(e){var t={bright_red:"#ff0000",dark_red:"#990000",bright_blue:"#4444ff",dark_blue:"#110077",bright_green:"#00dd00",dark_green:"#118800",bright_purple:"#cc00cc",dark_purple:"#770099",bright_orange:"#ee6600",dark_orange:"#aa4400",bright_turquoise:"#00ccbb",dark_turquoise:"#008877"};return t[e]},grapher.registerKeyboardHandler=function(e){d3.select(window).on("keydown",e)}})();