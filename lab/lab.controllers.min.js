(function(){typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),controllers={version:"0.0.1"},controllers.simpleModelController=function(a,b,c){function s(){model.stop()}function t(){model.on("tick",n),(!Number(f)||model.stepCounter()<f)&&model.resume()}function u(){s(),model.stepBack()}function v(){(!Number(f)||model.stepCounter()<f)&&model.stepForward()}function w(){atoms=model.get_atoms(),nodes=model.get_nodes(),model.relax(),model.resetTime(),s(),model.on("tick",n),m.updateMoleculeRadius(),m.setup_particles(),layout.setupScreen(r),o=model.stepCounter()}function x(){layout.setupScreen(),p.resize()}function y(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?m.playback_component.action("play"):m.playback_component.action("stop"),a.preventDefault();break;case 13:m.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||m.playback_component.action("stop"),u(),a.preventDefault();break;case 39:model.is_stopped()||m.playback_component.action("stop"),v(),a.preventDefault()}}function z(){p.add_value(model.get("temperature"))}function A(){q.set_scaled_value(model.get("epsilon"))}function B(){$(layout.coulomb_forces_checkbox).attr("checked",model.get("coulomb_forces")),m.setup_particles()}var d=c.layoutStyle,e=c.autostart,f=c.maximum_model_steps,g=c.lj_epsilon_max,h=c.lj_epsilon_min,i=b.mol_number,j=b.epsilon,k=b.temperature,l=b.coulomb_forces,m,n,o,p,q,r;n=function(a){m.update_molecule_positions(),o>=model.stepCounter()&&s()},model=modeler.model({model_listener:n,mol_number:i,temperature:k,lennard_jones_forces:!0,coulomb_forces:l,temperature_control:!0,epsilon:j}),layout.selection=d,model_player=new ModelPlayer(model,e),m=layout.moleculeContainer(a),r={moleculeContainers:[m]},document.onwebkitfullscreenchange=x,window.onresize=x,document.onkeydown=y,w(),p=new Thermometer("#thermometer",model.temperature(),0,25),model.addPropertiesListener(["temperature"],z),z(),q=new SliderComponent("#attraction_slider",function(a){model.set({epsilon:a})},g,h,j),model.addPropertiesListener(["epsilon"],A),A(),layout.heatCoolButtons("#heat_button","#cool_button",0,25,model,function(a){p.add_value(a)}),model.addPropertiesListener(["coulomb_forces"],B),B(),e&&t()},controllers.complexModelController=function(a,b,c,d,e,f){function H(){function e(a){var b=model.ke(),c=model.pe(),d=b+c;F.update(),r.update_molecule_positions(),model.isNewStep()?(y.push(d),model.is_stopped()?(w.add_point(d),w.update_canvas()):w.add_canvas_point(d)):w.update(),t>.95*w.xmax&&w.xmax<i&&w.change_xaxis(w.xmax*2),t>=i&&v(),layout.displayStats(),layout.datatable_visible&&layout.render_datatable()}function f(){model=modeler.model({model_listener:e,mol_number:n,temperature:q,lennard_jones_forces:!0,coulomb_forces:!1,temperature_control:!0,epsilon:o,sigma:p})}function s(){function e(){n=+B.value,L(),f()}function f(){w.change_yaxis(C[n]),E.redraw(),F.redraw()}layout.selection=g,model_player=new ModelPlayer(model,h),r=layout.moleculeContainer(a,{title:"Simple Molecules",xlabel:"X position (nm)",ylabel:"Y position (nm)",playback_controller:!0,play_only_controller:!1,model_time_label:!0,grid_lines:!0,xunits:!0,yunits:!0,atom_mubers:!1,xmin:0,xmax:10,ymin:0,ymax:10}),model.addPropertiesListener(["sigma"],r.updateMoleculeRadius),w=grapher.realTimeGraph(b,{title:"Total Energy of the System",xlabel:"Model Time (ps)",xmin:0,xmax:2500,sample:.25,ylabel:null,ymin:0,ymax:200,dataset:y}),y=[model.ke()+model.pe()],w.new_data(y),model.on("play",w.show_canvas),model.on("stop",w.hide_canvas),F=layout.speedDistributionChart(d,{title:"Distribution of Speeds",xlabel:null,ylabel:"Count",xmax:2,xmin:0,ymax:15,ymin:0,quantile:.01}),E=layout.potentialChart(c,model,{title:"Lennard-Jones potential",xlabel:"Radius",ylabel:"Potential Energy",epsilon_max:j,epsilon_min:k,epsilon:o,sigma_max:l,sigma_min:m,sigma:p}),model.addPropertiesListener(["epsilon"],E.ljUpdate),model.addPropertiesListener(["sigma"],E.ljUpdate),G={moleculeContainers:[r],potentialCharts:[E],speedDistributionCharts:[F],energyCharts:[w]},z=document.getElementById("model-controls"),z&&(A=z.getElementsByTagName("input"),z.onchange=modelController),B=document.getElementById("select-molecule-number"),C={2:2,5:12.5,10:5,20:10,50:120,100:250,200:1e3,500:5e3},D={2:2,5:2,10:5,20:5,50:10,100:15,200:20,500:40},B.onchange=e,B.value=n}function u(){atoms=model.get_atoms(),nodes=model.get_nodes(),model.relax(),model.resetTime(),y=[model.ke()],r.updateMoleculeRadius(),r.setup_particles(),layout.setupScreen(G),t=model.stepCounter(),v(),model.on("tick",e)}function v(){model.stop(),w.hide_canvas(),r.playback_component.action("stop"),z&&(A[0].checked=!0)}function x(){model.stop(),model.stepCounter()<i?(model.stepForward(),w.hide_canvas(),z&&(A[0].checked=!0)):z&&(A[0].checked=!1)}function I(){model.on("tick",e),model.stepCounter()<i?(w.show_canvas(),model.resume(),z&&(A[0].checked=!0)):z&&(A[0].checked=!1)}function J(){v(),model.stepBack(),w.new_data(y)}function K(){model.stepCounter()<i?model.stepForward():z&&(A[0].checked=!0)}function L(){n=+B.value,model.set({mol_number:n}),u(),t=model.stepCounter(),layout.displayStats(),layout.datatable_visible?layout.render_datatable(!0):layout.hide_datatable(),y=[model.ke()],w.new_data(y),w.hide_canvas(),z&&(A[0].checked=!0)}function M(){layout.setupScreen(G)}function N(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?r.playback_component.action("play"):r.playback_component.action("stop"),a.preventDefault();break;case 13:r.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||r.playback_component.action("stop"),J(),a.preventDefault();break;case 39:model.is_stopped()||r.playback_component.action("stop"),K(),a.preventDefault()}}document.onwebkitfullscreenchange=M,window.onresize=M,document.onkeydown=N,f(),s(),u(),h&&I(),H.modelListener=e,H.modelGo=I,H.modelStop=v,H.modelReset=L}var g=f.layoutStyle,h=f.autostart,i=f.maximum_model_steps,j=f.lj_epsilon_max,k=f.lj_epsilon_min,l=2,m=.1,n=e.mol_number,o=e.epsilon,p=.34,q=e.temperature,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;return H(),H}})();