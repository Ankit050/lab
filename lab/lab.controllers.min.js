(function(){typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),controllers={version:"0.0.1"};var a=-0.1;controllers.simpleModelController=function(b,c){function g(a){j(molecules_lennard_jones.epsilon(a))}function h(a){j(molecules_lennard_jones.sigma(a))}function j(a){var b=a.sigma,c=a.epsilon,d=a.rmin,e;model.set_lj_coefficients(c,b),f.coefficients.sigma=b,f.coefficients.epsilon=c,f.coefficients.rmin=d,f.xmax=b*3,f.xmin=Math.floor(b/2),f.ymax=Math.ceil(c*-1)+0,f.ymin=Math.ceil(c*1)-2,f.variables[1].x=b,f.variables[0].x=d,lennard_jones_potential=[];for(var g=b*.5;g<f.xmax*3;g+=.05)e=molecules_lennard_jones.potential(g),e<100&&lennard_jones_potential.push([g,e])}function k(){model.nodes({num:mol_number,xdomain:10,ydomain:10,temperature:temperature,rmin:4.4}).initialize({temperature:temperature,lennard_jones_forces:layout.lennard_jones_forces_checkbox.checked,coulomb_forces:layout.coulomb_forces_checkbox.checked,model_listener:d}),atoms=model.get_atoms(),nodes=model.get_nodes()}function l(){k(),model.set_coulomb_forces(layout.coulomb_forces_checkbox.checked),model.set_lennard_jones_forces(layout.lennard_jones_forces_checkbox.checked),model.set_temperature_control(!0),model.setEpsilon(a),model.relax()}function n(){h(m[mol_number])}function o(){for(i=0;i<this.elements.length;i++)this.elements[i].checked&&(run_mode=this.elements[i].value);switch(run_mode){case"stop":p();break;case"step":q();break;case"go":r();break;case"reset":u()}}function p(){model.stop()}function q(){model.stop(),(!Number(maximum_model_steps)||model.stepCounter()<maximum_model_steps)&&model.stepForward()}function r(){model.on("tick",d),(!Number(maximum_model_steps)||model.stepCounter()<maximum_model_steps)&&model.resume()}function s(){p(),model.stepBack()}function t(){(!Number(maximum_model_steps)||model.stepCounter()<maximum_model_steps)&&model.stepForward()}function u(){l(),model.temperature(temperature),n(),p(),model.on("tick",d),c.update_molecule_radius(),c.setup_particles(),layout.setupScreen(layout.selection),step_counter=model.stepCounter()}function v(){layout.setupScreen(),x.resize()}function w(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?c.playback_component.action("play"):c.playback_component.action("stop"),a.preventDefault();break;case 13:c.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||c.playback_component.action("stop"),s(),a.preventDefault();break;case 39:model.is_stopped()||c.playback_component.action("stop"),t(),a.preventDefault()}}layout.selection=b;var d=function(a){c.update_molecule_positions(),x.add_value(model.temperature()),step_counter>=model.stepCounter()&&p()},e=molecules_lennard_jones.coefficients(),f={coefficients:e,variables:[{coefficient:"epsilon",x:e.rmin,y:e.epsilon},{coefficient:"sigma",x:e.sigma,y:0}]},m={2:7,5:6,10:5.5,20:5,50:4.5,100:4,200:3.5,500:3};document.onwebkitfullscreenchange=v,window.onresize=v,document.onkeydown=w,u();var x=new Thermometer("#thermometer",model.temperature(),0,25),y=new SliderComponent("#attraction_slider",function(a){model.setEpsilon(a)},lj_epsilon_max,lj_epsilon_min,a);layout.heatCoolButtons("#heat_button","#cool_button",0,25,model,function(a){x.add_value(a)}),autostart&&r()},controllers.complexModelController=function(a,b){function c(){function a(a){var c=model.ke(),d=model.pe(),e=model.stepCounter();layout.speed_update(),b.update_molecule_positions(),model.isNewStep()?(te_data.push(c),model_stopped?(ke_graph.add_point(c),ke_graph.update_canvas()):ke_graph.add_canvas_point(c)):ke_graph.update(),e>.95*ke_graph.xmax&&ke_graph.xmax<maximum_model_steps&&ke_graph.change_xaxis(ke_graph.xmax*2),e>=maximum_model_steps&&m(),layout.displayStats(),layout.datatable_visible&&layout.render_datatable()}function f(){model.nodes({num:mol_number,xdomain:10,ydomain:10,temperature:temperature}).initialize({temperature:temperature,coulomb_forces:layout.coulomb_forces_checkbox.checked,model_listener:a}),atoms=model.get_atoms(),nodes=model.get_nodes()}function g(){f(),model.set_coulomb_forces(layout.coulomb_forces_checkbox.checked),model.set_lennard_jones_forces(layout.lennard_jones_forces_checkbox.checked),model.relax(),te_data=[model.ke()]}function i(){mol_number=+h.value,r(),l()}function l(){ke_graph.change_yaxis(j[mol_number]),layout.lj_redraw(),speed_graph.ymax=k[mol_number],layout.speed_update(),layout.speed_redraw()}function m(){model_stopped=!0,model.stop(),ke_graph.hide_canvas(),d&&(e[0].checked=!0)}function n(){model_stopped=!0,model.stop(),model.stepCounter()<maximum_model_steps?(model.stepForward(),ke_graph.hide_canvas(),d&&(e[0].checked=!0)):d&&(e[0].checked=!1)}function o(){model_stopped=!1,model.on("tick",a),model.stepCounter()<maximum_model_steps?(ke_graph.show_canvas(),model.resume(),d&&(e[0].checked=!0)):d&&(e[0].checked=!1)}function p(){m(),model.stepBack(),ke_graph.new_data(te_data)}function q(){model_stopped=!0,model.stepCounter()<maximum_model_steps?model.stepForward():d&&(e[0].checked=!0)}function r(){mol_number=+h.value,update_coefficients(molecules_lennard_jones.coefficients()),g(),model.temperature(temperature),layout.temperature_control_checkbox.onchange(),b.update_molecule_radius(),b.setup_particles(),layout.setupScreen(layout.selection),l(),m(),model.on("tick",a),step_counter=model.stepCounter(),layout.displayStats(),layout.datatable_visible?layout.render_datatable(!0):layout.hide_datatable(),te_data=[model.ke()],ke_graph.new_data(te_data),ke_graph.hide_canvas(),d&&(e[0].checked=!0)}function s(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?b.playback_component.action("play"):b.playback_component.action("stop"),a.preventDefault();break;case 13:b.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||b.playback_component.action("stop"),p(),a.preventDefault();break;case 39:model.is_stopped()||b.playback_component.action("stop"),q(),a.preventDefault()}}var d=document.getElementById("model-controls");if(d)var e=d.getElementsByTagName("input");var h=document.getElementById("select-molecule-number"),j={2:2,5:12.5,10:5,20:10,50:120,100:250,200:1e3,500:5e3},k={2:2,5:2,10:5,20:5,50:10,100:15,200:20,500:40};h.onchange=i,h.value=mol_number,d&&(d.onchange=modelController),document.onwebkitfullscreenchange=layout.setupScreen,window.onresize=layout.setupScreen,document.onkeydown=s,r(),autostart&&o(),c.modelListener=a,c.modelGo=o,c.modelStop=m,c.modelReset=r}return layout.selection=a,c(),c}})();