(function(){typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),controllers={version:"0.0.1"},controllers.simpleModelController=function(a,b){function p(){model.stop()}function q(){model.on("tick",l),(!Number(e)||model.stepCounter()<e)&&model.resume()}function r(){p(),model.stepBack()}function s(){(!Number(e)||model.stepCounter()<e)&&model.stepForward()}function t(){atoms=model.get_atoms(),nodes=model.get_nodes(),model.relax(),model.resetTime(),p(),model.on("tick",l),molecule_container.update_molecule_radius(),molecule_container.setup_particles(),layout.setupScreen(layout.selection),m=model.stepCounter()}function u(){layout.setupScreen(),n.resize()}function v(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?molecule_container.playback_component.action("play"):molecule_container.playback_component.action("stop"),a.preventDefault();break;case 13:molecule_container.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||molecule_container.playback_component.action("stop"),r(),a.preventDefault();break;case 39:model.is_stopped()||molecule_container.playback_component.action("stop"),s(),a.preventDefault()}}function w(){n.add_value(model.get("temperature"))}function x(){o.set_scaled_value(model.get("epsilon"))}function y(){$(layout.coulomb_forces_checkbox).attr("checked",model.get("coulomb_forces")),molecule_container.setup_particles()}var c=b.layoutStyle,d=b.autostart,e=b.maximum_model_steps,f=b.mol_number,g=b.lj_epsilon_max,h=b.lj_epsilon_min,i=b.epsilon,j=b.temperature,k=b.coulomb_forces,l,m,n,o;l=function(a){molecule_container.update_molecule_positions(),m>=model.stepCounter()&&p()},model=modeler.model({temperature:j,lennard_jones_forces:!0,coulomb_forces:k,temperature_control:!0,model_listener:l,epsilon:i,mol_number:f}),layout.selection=c,model_player=new ModelPlayer(model,d),molecule_container=layout.moleculeContainer(a),document.onwebkitfullscreenchange=u,window.onresize=u,document.onkeydown=v,t(),n=new Thermometer("#thermometer",model.temperature(),0,25),model.addPropertiesListener(["temperature"],w),w(),o=new SliderComponent("#attraction_slider",function(a){model.set({epsilon:a})},g,h,i),model.addPropertiesListener(["epsilon"],x),x(),layout.heatCoolButtons("#heat_button","#cool_button",0,25,model,function(a){n.add_value(a)}),model.addPropertiesListener(["coulomb_forces"],y),y(),d&&q()},controllers.complexModelController=function(a,b){function c(){function a(a){var c=model.ke(),d=model.pe(),e=model.stepCounter();layout.speed_update(),b.update_molecule_positions(),model.isNewStep()?(te_data.push(c),model_stopped?(ke_graph.add_point(c),ke_graph.update_canvas()):ke_graph.add_canvas_point(c)):ke_graph.update(),e>.95*ke_graph.xmax&&ke_graph.xmax<maximum_model_steps&&ke_graph.change_xaxis(ke_graph.xmax*2),e>=maximum_model_steps&&m(),layout.displayStats(),layout.datatable_visible&&layout.render_datatable()}function f(){model.nodes({num:mol_number,xdomain:10,ydomain:10,temperature:temperature}).initialize({temperature:temperature,coulomb_forces:layout.coulomb_forces_checkbox.checked,model_listener:a}),atoms=model.get_atoms(),nodes=model.get_nodes()}function g(){f(),model.set_coulomb_forces(layout.coulomb_forces_checkbox.checked),model.set_lennard_jones_forces(layout.lennard_jones_forces_checkbox.checked),model.relax(),model.resetTime(),te_data=[model.ke()]}function i(){mol_number=+h.value,r(),l()}function l(){ke_graph.change_yaxis(j[mol_number]),layout.lj_redraw(),speed_graph.ymax=k[mol_number],layout.speed_update(),layout.speed_redraw()}function m(){model_stopped=!0,model.stop(),ke_graph.hide_canvas(),d&&(e[0].checked=!0)}function n(){model_stopped=!0,model.stop(),model.stepCounter()<maximum_model_steps?(model.stepForward(),ke_graph.hide_canvas(),d&&(e[0].checked=!0)):d&&(e[0].checked=!1)}function o(){model_stopped=!1,model.on("tick",a),model.stepCounter()<maximum_model_steps?(ke_graph.show_canvas(),model.resume(),d&&(e[0].checked=!0)):d&&(e[0].checked=!1)}function p(){m(),model.stepBack(),ke_graph.new_data(te_data)}function q(){model_stopped=!0,model.stepCounter()<maximum_model_steps?model.stepForward():d&&(e[0].checked=!0)}function r(){mol_number=+h.value,update_coefficients(molecules_lennard_jones.coefficients()),g(),model.temperature(temperature),layout.temperature_control_checkbox.onchange(),b.update_molecule_radius(),b.setup_particles(),layout.setupScreen(layout.selection),l(),m(),model.on("tick",a),step_counter=model.stepCounter(),layout.displayStats(),layout.datatable_visible?layout.render_datatable(!0):layout.hide_datatable(),te_data=[model.ke()],ke_graph.new_data(te_data),ke_graph.hide_canvas(),d&&(e[0].checked=!0)}function s(a){a=a?a:window.event?event:null;if(a)switch(a.keyCode){case 32:model.is_stopped()?b.playback_component.action("play"):b.playback_component.action("stop"),a.preventDefault();break;case 13:b.playback_component.action("play"),a.preventDefault();break;case 37:model.is_stopped()||b.playback_component.action("stop"),p(),a.preventDefault();break;case 39:model.is_stopped()||b.playback_component.action("stop"),q(),a.preventDefault()}}var d=document.getElementById("model-controls");if(d)var e=d.getElementsByTagName("input");var h=document.getElementById("select-molecule-number"),j={2:2,5:12.5,10:5,20:10,50:120,100:250,200:1e3,500:5e3},k={2:2,5:2,10:5,20:5,50:10,100:15,200:20,500:40};h.onchange=i,h.value=mol_number,d&&(d.onchange=modelController),document.onwebkitfullscreenchange=layout.setupScreen,window.onresize=layout.setupScreen,document.onkeydown=s,r(),autostart&&o(),c.modelListener=a,c.modelGo=o,c.modelStop=m,c.modelReset=r}return layout.selection=a,c(),c}})();