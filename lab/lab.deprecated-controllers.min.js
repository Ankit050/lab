(function(){typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),controllers.simpleModelController=function(e,t,n){function T(){function x(){r=n.layoutStyle,i=n.autostart,s=n.maximum_model_steps,o=n.lj_epsilon_max,u=n.lj_epsilon_min,a=t.elements,f=t.atoms,l=t.mol_number,c=t.temperature_control,h=t.temperature,p=t.coulomb_forces,d=t.width,v=t.height,m=t.radialBonds,g=t.obstacles}function N(){model=modeler.model({elements:a,model_listener:w,temperature:h,lennard_jones_forces:!0,coulomb_forces:p,temperature_control:c,width:d,height:v});if(f)model.createNewAtoms(f);else{if(!l)throw new Error("simpleModelController: tried to create a model without atoms or mol_number.");model.createNewAtoms({num:l,relax:!0})}m&&model.createRadialBonds(m),g&&model.createObstacles(g)}function C(){layout.selection=r,model_player=new ModelPlayer(model,i),b=layout.moleculeContainer(e,{xmax:d,ymax:v,get_nodes:function(){return model.get_nodes()},get_num_atoms:function(){return model.get_num_atoms()},get_obstacles:function(){return model.get_obstacles()}}),b.updateMoleculeRadius(),b.setup_drawables(),S=new Thermometer("#thermometer",model.temperature(),200,4e3),model.addPropertiesListener(["temperature"],L),S.resize(),L(),layout.heatCoolButtons("#heat_button","#cool_button",0,3800,model,function(e){S.add_value(e)}),model.addPropertiesListener(["coulomb_forces"],k),k(),layout.addView("moleculeContainers",b),layout.addView("thermometers",S),layout.setupScreen()}function k(){$(layout.coulomb_forces_checkbox).attr("checked",model.get("coulomb_forces")),b.setup_drawables()}function L(){S.add_value(model.get("temperature"))}function A(){model.stop()}function O(){model.on("tick",w),(!Number(s)||model.stepCounter()<s)&&model.resume()}function M(){A(),model.stepBack()}function _(){(!Number(s)||model.stepCounter()<s)&&model.stepForward()}function D(){y=model.get_nodes(),model.resetTime(),A(),model.on("tick",w),E=model.stepCounter()}function P(){layout.setupScreen(),S.resize(),L()}function H(e){x(),N(),D(),e?C():j()}function j(){layout.setupScreen(!0)}function F(e,r){t=e,n=r,H(!1)}w=function(e){b.update_drawable_positions(),E>=model.stepCounter()&&A()},document.onwebkitfullscreenchange=P,window.onresize=P;if(typeof DEVELOPMENT=="undefined")try{H(!0)}catch(B){throw alert(B),new Error(B)}else H(!0);i&&O(),T.updateLayout=j,T.reload=F}var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;return T(),T},controllers.complexModelController=function(e,t,n,r,s,o){function R(){function s(e){var t=model.ke(),n=model.pe(),r=t+n;F.update(),T.update_drawable_positions(),model.isNewStep()?(M[0].push(t),M[1].push(n),M[2].push(r),A.add_points([t,n,r])):A.update(model.stepCounter()),C>=f&&O(),layout.displayStats(),layout.datatable_visible&&layout.render_datatable()}function o(e){var t=model.stepCounter();if(e)for(i=0,len=M.length;i<len;i++)M[i].length=t;else ke=model.ke(),pe=model.pe(),te=ke+pe,M=[[ke],[pe],[te]]}function N(){model=modeler.model({elements:d,model_listener:s,temperature:y,lennard_jones_forces:!0,coulomb_forces:w,temperature_control:b,width:E,height:S});if(v)model.createNewAtoms(v),m&&model.createRadialBonds(m),x&&model.createObstacles(x);else{if(!g)throw new Error("simpleModelController: tried to create a model without atoms or mol_number.");model.createNewAtoms({num:g,relax:!0})}}function k(){function i(){$(layout.coulomb_forces_checkbox).attr("checked",model.get("coulomb_forces")),T.setup_drawables()}function s(){g=+P.value,V(),I.checked=!1,f()}function f(){A.change_yaxis(H[g]),j.redraw(),F.redraw()}layout.selection=u,model_player=new ModelPlayer(model,a),T=layout.moleculeContainer(e,{title:"Simple Molecules",xlabel:"X position (nm)",ylabel:"Y position (nm)",playback_controller:!0,play_only_controller:!1,model_time_label:!0,grid_lines:!0,xunits:!0,yunits:!0,atom_mubers:!1,xmin:0,xmax:E,ymin:0,ymax:S,get_nodes:function(){return model.get_nodes()},get_num_atoms:function(){return model.get_num_atoms()},get_obstacles:function(){return model.get_obstacles()}}),model.addPropertiesListener(["sigma"],T.updateMoleculeRadius),o(),A=grapher.realTimeGraph(t,{title:"Energy of the System (KE:red, PE:green, TE:blue)",xlabel:"Model Time (ps)",xmin:0,xmax:100,sample:.1,ylabel:"eV",ymin:-5,ymax:5,dataset:M}),A.new_data(M),model.on("play",function(){var e,t;A.number_of_points()&&model.stepCounter()<A.number_of_points()&&(o(model.stepCounter()),A.new_data(M)),A.show_canvas()}),model.on("stop",function(){}),model.on("seek",function(){modelsteps=model.stepCounter(),modelsteps>0?(o(modelsteps),A.new_data(M)):(o(),A.new_data(M))}),F=layout.speedDistributionChart(r,{title:"Distribution of Speeds",xlabel:null,ylabel:"Count",xmax:2,xmin:0,ymax:15,ymin:0,quantile:.01}),j=layout.potentialChart(n,model,{title:"Lennard-Jones potential",xlabel:"Radius",ylabel:"Potential Energy",epsilon_max:l,epsilon_min:c,epsilon:d[0].epsilon,sigma_max:h,sigma_min:p,sigma:d[0].sigma}),model.addPropertiesListener(["epsilon"],j.ljUpdate),model.addPropertiesListener(["sigma"],j.ljUpdate),model.addPropertiesListener(["coulomb_forces"],i),i(),layout.addView("moleculeContainers",T),layout.addView("potentialCharts",j),layout.addView("speedDistributionCharts",F),layout.addView("energyCharts",A),_=document.getElementById("model-controls"),_&&(D=_.getElementsByTagName("input"),_.onchange=modelController),P=document.getElementById("select-molecule-number"),I=document.getElementById("radio-randomize-pos-vel"),checkbox_thermalize=document.getElementById("checkbox-thermalize"),H={2:2,5:12.5,10:5,20:10,50:120,100:250,200:1e3,500:5e3},B={2:2,5:2,10:5,20:5,50:10,100:15,200:20,500:40},P.onchange=s,I.onclick=s,P.value=g}function L(){q=model.get_nodes(),model.resetTime(),o(),T.setup_drawables(),T.updateMoleculeRadius(),layout.setupScreen(),C=model.stepCounter(),P.value=model.get_num_atoms(),O(),model.on("tick",s)}function O(){model.stop(),T.playback_component.action("stop"),_&&(D[0].checked=!0)}function U(){model.stop(),model.stepCounter()<f?(model.stepForward(),_&&(D[0].checked=!0)):_&&(D[0].checked=!1)}function z(){model.on("tick",s),model.stepCounter()<f?(A.show_canvas(),model.resume(),_&&(D[0].checked=!0)):_&&(D[0].checked=!1)}function W(){O(),model.stepBack(),A.showMarker(model.stepCounter())}function X(){model.stepCounter()<f?model.stepForward():_&&(D[0].checked=!0)}function V(){var e=!checkbox_thermalize.checked;g=+P.value,model.createNewAtoms(g,e),L(),T.update_drawable_positions(),C=model.stepCounter(),layout.displayStats(),layout.datatable_visible?layout.render_datatable(!0):layout.hide_datatable(),o(),A.new_data(M),_&&(D[0].checked=!0)}function J(){layout.setupScreen()}function K(){N(),k(),L()}document.onwebkitfullscreenchange=J,window.onresize=J;if(typeof DEVELOPMENT=="undefined")try{K()}catch(Q){throw alert(Q),new Error(Q)}else K();a&&z(),R.modelListener=s,R.modelGo=z,R.modelStop=O,R.modelReset=V,R.resetEnergyData=o,R.energyGraph=A,R.moleculeContainer=T}var u=o.layoutStyle,a=o.autostart,f=o.maximum_model_steps,l=o.lj_epsilon_max,c=o.lj_epsilon_min,h=2,p=.1,d=s.elements,v=s.atoms,m=s.radialBonds,g=s.mol_number,y=s.temperature,b=s.temperature_control,w=s.coulomb_forces,E=s.width,S=s.height,m=s.radialBonds,x=s.obstacles,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,P,I,q;return R(),R}})();